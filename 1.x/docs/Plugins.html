<!DOCTYPE html SYSTEM "about:legacy-compat">
<html>
      <head>
        <meta charset="utf-8"/>
        <meta content="width=device-width, initial-scale=1" name="viewport"/>
        <title>sbt Reference Manual — Plugins</title>
        <link rel="shortcut icon" href="favicon.ico"/>
        <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css"/>
        <link rel="stylesheet" href="css/pamflet.css" type="text/css" media="screen, projection"/>
        <link rel="stylesheet" href="css/pamflet-print.css" type="text/css" media="print"/>
        <link rel="stylesheet" href="css/pamflet-grid.css" type="text/css" media="screen and (min-device-width: 800px), projection"/>
        <link rel="stylesheet" href="css/color_scheme-redmond.css" type="text/css" media="screen, projection"/>
        <link rel="stylesheet" href="css/color_scheme-github.css" type="text/css" media="screen, projection"/>
        <link rel="stylesheet" href="css/color_scheme-monokai.css" type="text/css" media="screen, projection"/>
        <link rel="stylesheet" href="css/pamfletheight_80px_2em.css" type="text/css" media="screen and (min-device-width: 800px), projection"/>
        <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
        <script type="text/javascript" src="js/bootstrap.bundle.min.js"></script>
        <script type="text/javascript" src="js/pamflet.js"></script>
        <script type="text/javascript">
          Pamflet.page.language = 'en';
        </script>
        <script type="text/javascript" src="js/prettify/prettify.js"></script><script type="text/javascript" src="js/prettify/lang-scala.js"></script><link type="text/css" rel="stylesheet" href="css/prettify.css"/><script type="text/javascript"><!--
        window.onload=function() { prettyPrint(); };
      --></script>
        <link rel="stylesheet" href="css/custom.css" type="text/css" media="screen, projection"/><link rel="stylesheet" href="css/custom-202107.css" type="text/css" media="screen, projection"/>
        
        <script type="text/javascript">
              Pamflet.twitter = '#sbt #scala';
            </script>
      </head>
      <body class="color_scheme-github">
        <div class="container-fluid contentswrapper h-100">
          <div class="row minh-100">
          <div class="col-md-4 col-xl-3 toccolumn leftcolumn">
                  <div class="lefttocwrapper">
      <div class="tocwrapper">
        
        <div class="tocbody show" id="toc">
        
        <div><a href="index.html">sbt Reference Manual</a></div><ol class="toc"> <li><div><a href="Getting-Started.html">Getting Started with sbt</a></div><ol class="toc"> <li><div><a href="Setup.html">Installing sbt</a></div><ol class="toc"> <li><div><a href="Installing-sbt-on-Mac.html">Installing sbt on macOS</a></div></li><li><div><a href="Installing-sbt-on-Windows.html">Installing sbt on Windows</a></div></li><li><div><a href="Installing-sbt-on-Linux.html">Installing sbt on Linux</a></div></li> </ol></li><li><div><a href="sbt-by-example.html">sbt by example</a></div></li><li><div><a href="Directories.html">Directory structure</a></div></li><li><div><a href="Running.html">Running</a></div></li><li><div><a href="Basic-Def.html">Build definition</a></div></li><li><div><a href="Multi-Project.html">Multi-project builds</a></div></li><li><div><a href="Task-Graph.html">Task graph</a></div></li><li><div><a href="Scopes.html">Scopes</a></div></li><li><div><a href="Appending-Values.html">Appending values</a></div></li><li><div><a href="Scope-Delegation.html">Scope delegation (.value lookup)</a></div></li><li><div><a href="Library-Dependencies.html">Library dependencies</a></div></li><li><div><a href="Using-Plugins.html">Using plugins</a></div></li><li><div><a href="Custom-Settings.html">Custom settings and tasks</a></div></li><li><div><a href="Organizing-Build.html">Organizing the build</a></div></li><li><div><a href="Summary.html">Getting Started summary</a></div></li> </ol></li><li><div><a href="Faq.html">Frequently Asked Questions</a></div><ol class="toc">  </ol></li><li><div><a href="General-Info.html">General Information</a></div><ol class="toc"> <li><div><a href="Credits.html">Credits</a></div></li><li><div><a href="Community-Plugins.html">Community Plugins</a></div></li><li><div><a href="Repository-Roles.html">Community Repository Policy</a></div></li><li><div><a href="Bintray-For-Plugins.html">Bintray For Plugins</a></div></li><li><div><a href="Setup-Notes.html">Setup Notes</a></div></li><li><div><a href="Using-Sonatype.html">Using Sonatype</a></div></li><li><div><a href="Contributing-to-sbt.html">Contributing to sbt</a></div></li><li><div><a href="Changes.html">Changes</a></div><ol class="toc"> <li><div><a href="Migrating-from-sbt-013x.html">Migrating from sbt 0.13.x</a></div></li><li><div><a href="sbt-1.4-Release-Notes.html">sbt 1.4.x releases</a></div></li><li><div><a href="sbt-1.3-Release-Notes.html">sbt 1.3.x releases</a></div></li><li><div><a href="sbt-1.2-Release-Notes.html">sbt 1.2.x releases</a></div></li><li><div><a href="sbt-1.1-Release-Notes.html">sbt 1.1.x releases</a></div></li><li><div><a href="sbt-1.0-Release-Notes.html">sbt 1.0.x releases</a></div></li> </ol></li> </ol></li><li><div><a href="Detailed-Topics.html">Detailed Topics</a></div><ol class="toc"> <li><div><a href="Using-sbt.html">Using sbt</a></div><ol class="toc"> <li><div><a href="Command-Line-Reference.html">Command Line Reference</a></div></li><li><div><a href="Console-Project.html">Console Project</a></div></li><li><div><a href="Cross-Build.html">Cross-building</a></div></li><li><div><a href="Inspecting-Settings.html">Interacting with the Configuration System</a></div></li><li><div><a href="Triggered-Execution.html">Triggered Execution</a></div></li><li><div><a href="Scripts.html">Scripts, REPL, and Dependencies</a></div></li><li><div><a href="sbt-server.html">sbt Server</a></div></li><li><div><a href="Understanding-Recompilation.html">Understanding Incremental Recompilation</a></div></li> </ol></li><li><div><a href="Configuration-Index.html">Configuration</a></div><ol class="toc"> <li><div><a href="Classpaths.html">Classpaths, sources, and resources</a></div></li><li><div><a href="Compiler-Plugins.html">Compiler Plugin Support</a></div></li><li><div><a href="Configuring-Scala.html">Configuring Scala</a></div></li><li><div><a href="Forking.html">Forking</a></div></li><li><div><a href="Global-Settings.html">Global Settings</a></div></li><li><div><a href="Java-Sources.html">Java Sources</a></div></li><li><div><a href="Mapping-Files.html">Mapping Files</a></div></li><li><div><a href="Local-Scala.html">Local Scala</a></div></li><li><div><a href="Macro-Projects.html">Macro Projects</a></div></li><li><div><a href="Paths.html">Paths</a></div></li><li><div><a href="Parallel-Execution.html">Parallel Execution</a></div></li><li><div><a href="Process.html">External Processes</a></div></li><li><div><a href="Running-Project-Code.html">Running Project Code</a></div></li><li><div><a href="Testing.html">Testing</a></div></li><li><div><a href="In-Process-Classloaders.html">In process class loading</a></div></li><li><div><a href="Globs.html">Globs</a></div></li><li><div><a href="Remote-Caching.html">Remote Caching</a></div></li> </ol></li><li><div><a href="Dependency-Management-Index.html">Dependency Management</a></div><ol class="toc"> <li><div><a href="Artifacts.html">Artifacts</a></div></li><li><div><a href="Dependency-Management-Flow.html">Dependency Management Flow</a></div></li><li><div><a href="Library-Management.html">Library Management</a></div></li><li><div><a href="Proxy-Repositories.html">Proxy Repositories</a></div></li><li><div><a href="Publishing.html">Publishing</a></div></li><li><div><a href="Resolvers.html">Resolvers</a></div></li><li><div><a href="Update-Report.html">Update Report</a></div></li><li><div><a href="Cached-Resolution.html">Cached Resolution</a></div></li> </ol></li><li><div><a href="Tasks-and-Commands.html">Tasks and Commands</a></div><ol class="toc"> <li><div><a href="Tasks.html">Tasks</a></div></li><li><div><a href="Caching.html">Caching</a></div></li><li><div><a href="Input-Tasks.html">Input Tasks</a></div></li><li><div><a href="Commands.html">Commands</a></div></li><li><div><a href="Parsing-Input.html">Parsing and tab completion</a></div></li><li><div><a href="Build-State.html">State and actions</a></div></li><li><div><a href="Task-Inputs.html">Tasks/Settings: Motivation</a></div></li> </ol></li><li><div><a href="Plugins-and-Best-Practices.html">Plugins and Best Practices</a></div><ol class="toc"> <li><div><a href="Best-Practices.html">General Best Practices</a></div></li><li><div class="current">Plugins</div></li><li><div><a href="Plugins-Best-Practices.html">Plugins Best Practices</a></div></li><li><div><a href="GitHub-Actions-with-sbt.html">Setting up GitHub Actions with sbt</a></div></li><li><div><a href="Travis-CI-with-sbt.html">Setting up Travis CI with sbt</a></div></li><li><div><a href="Testing-sbt-plugins.html">Testing sbt plugins</a></div></li><li><div><a href="sbt-new-and-Templates.html">sbt new and Templates</a></div></li><li><div><a href="Cross-Build-Plugins.html">Cross building plugins</a></div></li> </ol></li> </ol></li><li><div><a href="Howto.html">How to…</a></div><ol class="toc"> <li><div><a href="Howto-Classpaths.html">Classpaths</a></div></li><li><div><a href="Howto-Customizing-Paths.html">Customizing paths</a></div></li><li><div><a href="Howto-Generating-Files.html">Generating files</a></div></li><li><div><a href="Howto-Inspect-the-Build.html">Inspect the build</a></div></li><li><div><a href="Howto-Interactive-Mode.html">Interactive mode</a></div></li><li><div><a href="Howto-Logging.html">Configure and use logging</a></div></li><li><div><a href="Howto-Project-Metadata.html">Project metadata</a></div></li><li><div><a href="Howto-Package.html">Configure packaging</a></div></li><li><div><a href="Howto-Running-Commands.html">Running commands</a></div></li><li><div><a href="Howto-Scala.html">Configure and use Scala</a></div></li><li><div><a href="Howto-Scaladoc.html">Generate API documentation</a></div></li><li><div><a href="Define+Custom+Tasks.html">Define Custom Tasks</a></div></li><li><div><a href="Howto-Startup.html">How to take an action on startup</a></div></li><li><div><a href="Howto-Track-File-Inputs-and-Outputs.html">Track file inputs and outputs</a></div></li><li><div><a href="Troubleshoot-Memory-Issues.html">Troubleshoot memory issues</a></div></li><li><div><a href="Howto-Sequencing.html">Sequencing</a></div><ol class="toc"> <li><div><a href="Howto-Sequential-Task.html">Defining a sequential task with Def.sequential</a></div></li><li><div><a href="Howto-Dynamic-Task.html">Defining a dynamic task with Def.taskDyn</a></div></li><li><div><a href="Howto-After-Input-Task.html">Doing something after an input task</a></div></li><li><div><a href="Howto-Dynamic-Input-Task.html">Defining a dynamic input task with Def.inputTaskDyn</a></div></li><li><div><a href="Howto-Sequence-using-Commands.html">How to sequence using commands</a></div></li> </ol></li><li><div><a href="Custom-Dependency-Configuration.html">How to define a custom dependency configuration</a></div></li><li><div><a href="Examples.html">Examples</a></div><ol class="toc"> <li><div><a href="Basic-Def-Examples.html">.sbt build examples</a></div></li><li><div><a href="Scala-Files-Example.html">.sbt build with .scala files example</a></div></li><li><div><a href="Advanced-Configurations-Example.html">Advanced configurations example</a></div></li><li><div><a href="Advanced-Command-Example.html">Advanced command example</a></div></li> </ol></li> </ol></li><li><div><a href="Name-Index.html">Index</a></div></li><li><div><a href="Developers-Guide.html">Developer’s Guide (Work in progress)</a></div><ol class="toc"> <li><div><a href="Modularization.html">Modularization</a></div><ol class="toc"> <li><div><a href="Module-Summary.html">Module summary</a></div></li> </ol></li><li><div><a href="Coding-Guideline.html">sbt Coding Guideline</a></div><ol class="toc">  </ol></li><li><div><a href="Datatype.html">sbt-datatype</a></div><ol class="toc">  </ol></li><li><div><a href="Compiler-Interface.html">Compiler Interface</a></div><ol class="toc"> <li><div><a href="Version-Specific-Sources.html">Fetching the most specific sources</a></div></li> </ol></li><li><div><a href="Sbt-Launcher.html">sbt Launcher</a></div><ol class="toc"> <li><div><a href="Launcher-Getting-Started.html">Getting Started with the sbt launcher</a></div></li><li><div><a href="Launcher-Architecture.html">Sbt Launcher Architecture</a></div></li><li><div><a href="Launcher-Configuration.html">sbt Launcher Configuration</a></div></li> </ol></li><li><div><a href="DevGuide-Notes.html">Notes</a></div><ol class="toc"> <li><div><a href="Core-Principles.html">Core Principles</a></div></li><li><div><a href="Settings-Core.html">Settings Core</a></div></li><li><div><a href="Setting-Initialization.html">Setting Initialization</a></div></li><li><div><a href="Command-Line-Applications.html">Creating Command Line Applications Using sbt</a></div></li> </ol></li> </ol></li><li><div><a href="Archived+pages.html">Archived pages</a></div><ol class="toc"> <li><div><a href="Hello.html">Hello, World</a></div></li> </ol></li><li class="generated"><div><a href="Contents+in+Depth.html">Contents in Depth</a></div></li><li class="generated"><div><a href="Combined+Pages.html">Combined Pages</a></div></li> </ol></div>
      </div>
      </div>
                </div><div class="col-md-8 col-xs-9">
                  <div class="rightcolumn contents">
                  <h2 id="Plugins">Plugins<a href="#Plugins" class="header-link"><span class="header-link-content">&nbsp;</span></a></h2><p>There’s a <a href="Using-Plugins.html">getting started page</a> focused on using existing plugins,
which you may want to read first.
</p><p>A plugin is a way to use external code in a build definition.
A plugin can be a library used to implement a task (you might use
<a href="https://github.com/tristanjuricek/knockoff/">Knockoff</a> to write a
markdown processing task). A plugin can define a sequence of sbt settings
that are automatically added to all projects or that are explicitly
declared for selected projects. For example, a plugin might add a
<code>proguard</code> task and associated (overridable) settings. Finally, a plugin
can define new commands (via the <code>commands</code> setting).
</p><p>sbt 0.13.5 introduces auto plugins, with improved dependency management
among the plugins and explicitly scoped auto importing.
Going forward, our recommendation is to migrate to the auto plugins.
The <a href="Plugins-Best-Practices.html">Plugins Best Practices</a> page describes
the currently evolving guidelines to writing sbt plugins. See also the general
<a href="Best-Practices.html">best practices</a>.
</p><h3 id="Using+an+auto+plugin">Using an auto plugin<a href="#Using+an+auto+plugin" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>A common situation is when using a binary plugin published to a repository.
You can create <code>project/plugins.sbt</code> with all of the desired sbt plugins, any general dependencies, and any necessary repositories:
</p><pre><code class="prettyprint lang-scala">addSbtPlugin(&quot;org.example&quot; % &quot;plugin&quot; % &quot;1.0&quot;)
addSbtPlugin(&quot;org.example&quot; % &quot;another-plugin&quot; % &quot;2.0&quot;)

// plain library (not an sbt plugin) for use in the build definition
libraryDependencies += &quot;org.example&quot; % &quot;utilities&quot; % &quot;1.3&quot;

resolvers += &quot;Example Plugin Repository&quot; at &quot;https://example.org/repo/&quot;
</code></pre><p>Many of the auto plugins automatically add settings into projects,
however, some may require explicit enablement. Here’s an example:
</p><pre><code class="prettyprint lang-scala">lazy val util = (project in file(&quot;util&quot;))
  .enablePlugins(FooPlugin, BarPlugin)
  .disablePlugins(plugins.IvyPlugin)
  .settings(
    name := &quot;hello-util&quot;
  )
</code></pre><p>See <a href="Using-Plugins.html">using plugins</a> in the Getting Started guide for more details on using plugins.
</p><h3 id="By+Description">By Description<a href="#By+Description" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>A plugin definition is a project under <code>project/</code> folder. This
project’s classpath is the classpath used for build definitions in
<code>project/</code> and any <code>.sbt</code> files in the project’s base
directory. It is also used for the <code>eval</code> and <code>set</code> commands.
</p><p>Specifically,
</p><ol><li>Managed dependencies declared by the <code>project/</code> project are
retrieved and are available on the build definition classpath, just
like for a normal project.
</li><li>Unmanaged dependencies in <code>project/lib/</code> are available to the build
definition, just like for a normal project.
</li><li>Sources in the <code>project/</code> project are the build definition files and
are compiled using the classpath built from the managed and
unmanaged dependencies.
</li><li>Project dependencies can be declared in <code>project/plugins.sbt</code>
(similarly to <code>build.sbt</code> file in a normal project) and will be available to the build
definitions.
</li></ol><p>The build definition classpath is searched for <code>sbt/sbt.autoplugins</code>
descriptor files containing the names of
<code>sbt.AutoPlugin</code> implementations.
</p><p>The <code>reload plugins</code> command changes the current build to
the (root) project’s <code>project/</code> build definition. This allows manipulating
the build definition project like a normal project. <code>reload return</code> changes back
to the original build. Any session settings for the plugin definition
project that have not been saved are dropped.
</p><p>An auto plugin is a module that defines settings to automatically inject into
projects. In addition an auto plugin provides the following feature:
</p><ul><li>Automatically import selective names to <code>.sbt</code> files and the <code>eval</code> and <code>set</code> commands.
</li><li>Specify plugin dependencies to other auto plugins.
</li><li>Automatically activate itself when all dependencies are present.
</li><li>Specify <code>projectSettings</code>, <code>buildSettings</code>, and <code>globalSettings</code> as appropriate.
</li></ul><h3 id="Plugin+dependencies">Plugin dependencies<a href="#Plugin+dependencies" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>When a traditional plugin wanted to reuse some functionality from an existing plugin, it would pull in the plugin as a library dependency, and then it would either:
</p><ol><li>add the setting sequence from the dependency as part of its own setting sequence, or
</li><li>tell the build users to include them in the right order.
</li></ol><p>This becomes complicated as the number of plugins increase within an application, and becomes more error prone. The main goal of auto plugin is to alleviate this setting dependency problem. An auto plugin can depend on other auto plugins and ensure these dependency settings are loaded first.
</p><p>Suppose we have the <code>SbtLessPlugin</code> and the <code>SbtCoffeeScriptPlugin</code>, which in turn depends on the <code>SbtJsTaskPlugin</code>, <code>SbtWebPlugin</code>, and <code>JvmPlugin</code>. Instead of manually activating all of these plugins, a project can just activate the <code>SbtLessPlugin</code> and <code>SbtCoffeeScriptPlugin</code> like this:
</p><pre><code class="prettyprint lang-scala">lazy val root = (project in file(&quot;.&quot;))
  .enablePlugins(SbtLessPlugin, SbtCoffeeScriptPlugin)
</code></pre><p>This will pull in the right setting sequence from the plugins in the right order.  The key notion here is you declare the plugins you want, and sbt can fill in the gap.
</p><p>A plugin implementation is not required to produce an auto plugin, however.
It is a convenience for plugin consumers and because of the automatic nature, it is not always appropriate.
</p><h4 id="Global+plugins">Global plugins<a href="#Global+plugins" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>The <code>$HOME/.sbt/1.0/plugins/</code> directory is treated as a global plugin
definition project. It is a normal sbt project whose classpath is
available to all sbt project definitions for that user as described
above for per-project plugins.
</p><h3 id="Creating+an+auto+plugin">Creating an auto plugin<a href="#Creating+an+auto+plugin" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>A minimal sbt plugin is a Scala library that is built against the version of
Scala that sbt runs (currently, 2.12.14) or a Java library.
Nothing special needs to be done for this type of library.
A more typical plugin will provide sbt tasks, commands, or settings.
This kind of plugin may provide these settings
automatically or make them available for the user to explicitly
integrate.
</p><p>To make an auto plugin, create a project and enable <code>SbtPlugin</code>.
</p><pre><code class="prettyprint lang-scala">ThisBuild / version := &quot;0.1.0-SNAPSHOT&quot;
ThisBuild / organization := &quot;com.example&quot;
ThisBuild / homepage := Some(url(&quot;https://github.com/sbt/sbt-hello&quot;))

lazy val root = (project in file(&quot;.&quot;))
  .enablePlugins(SbtPlugin)
  .settings(
    name := &quot;sbt-hello&quot;,
    pluginCrossBuild / sbtVersion := {
      scalaBinaryVersion.value match {
        case &quot;2.12&quot; =&gt; &quot;1.2.8&quot; // set minimum sbt version
      }
    }
  )
</code></pre><p>Some details to note:
- sbt plugins must be compiled with Scala 2.12.x that sbt itself is compiled in. By NOT specifying <code>scalaVersion</code>, sbt will default to the Scala version suited for a plugin.
- By default sbt plugin is compiled with whichever the sbt version you are using. Because sbt does NOT keep forward compatibility, that would typically require all of your plugin users to upgrade to the latest too. <code>pluginCrossBuild / sbtVersion</code> is an optional setting to compile your plugin against an <em>older</em> version of sbt, which allows the plugin users to choose from a range of sbt versions.
</p><p>Then, write the plugin code and publish your project to a repository.
The plugin can be used as described in the previous section.
</p><p>First, in an appropriate namespace, define your auto plugin object
by extending <code>sbt.AutoPlugin</code>.
</p><h4 id="projectSettings+and+buildSettings">projectSettings and buildSettings<a href="#projectSettings+and+buildSettings" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>With auto plugins, all provided settings (e.g. <code>assemblySettings</code>) are provided by the plugin directly via the <code>projectSettings</code> method. Here’s an example plugin that adds a task named hello to sbt projects:
</p><pre><code class="prettyprint lang-scala">package sbthello

import sbt._
import Keys._

object HelloPlugin extends AutoPlugin {
  override def trigger = allRequirements

  object autoImport {
    val helloGreeting = settingKey[String](&quot;greeting&quot;)
    val hello = taskKey[Unit](&quot;say hello&quot;)
  }

  import autoImport._
  override lazy val globalSettings: Seq[Setting[_]] = Seq(
    helloGreeting := &quot;hi&quot;,
  )

  override lazy val projectSettings: Seq[Setting[_]] = Seq(
    hello := {
      val s = streams.value
      val g = helloGreeting.value
      s.log.info(g)
    }
  )
}
</code></pre><p>If the plugin needs to append settings at the build-level (that is, in <code>ThisBuild</code>) there’s a <code>buildSettings</code> method. The settings returned here are guaranteed to be added to a given build scope only once
regardless of how many projects for that build activate this AutoPlugin.
</p><pre><code class="prettyprint lang-scala">override def buildSettings: Seq[Setting[_]] = Nil
</code></pre><p>The <code>globalSettings</code> is appended once to the global settings (<code>in Global</code>).
These allow a plugin to automatically provide new functionality or new defaults. 
One main use of this feature is to globally add commands, such as for IDE plugins.
</p><pre><code class="prettyprint lang-scala">override def globalSettings: Seq[Setting[_]] = Nil
</code></pre><p>Use <code>globalSettings</code> to define the default value of a setting.
</p><h4 id="Implementing+plugin+dependencies">Implementing plugin dependencies<a href="#Implementing+plugin+dependencies" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>Next step is to define the plugin dependencies.
</p><pre><code class="prettyprint lang-scala">package sbtless

import sbt._
import Keys._
object SbtLessPlugin extends AutoPlugin {
  override def requires = SbtJsTaskPlugin
  override lazy val projectSettings = ...
}
</code></pre><p>The <code>requires</code> method returns a value of type <code>Plugins</code>, which is a DSL for constructing the dependency list. The requires method typically contains one of the following values:
</p><ul><li><code>empty</code> (No plugins)
</li><li>other auto plugins
</li><li><code>&amp;&amp;</code> operator (for defining multiple dependencies)
</li></ul><h4 id="Root+plugins+and+triggered+plugins">Root plugins and triggered plugins<a href="#Root+plugins+and+triggered+plugins" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>Some plugins should always be explicitly enabled on projects. we call
these root plugins, i.e. plugins that are “root” nodes in the plugin
dependency graph. An auto plugin is by default a root plugin.
</p><p>Auto plugins also provide a way for plugins to automatically attach themselves to
projects if their dependencies are met. We call these triggered plugins,
and they are created by overriding the <code>trigger</code> method.
</p><p>For example, we might want to create a triggered plugin that can append commands automatically to the build. To do this, set the <code>requires</code> method to return <code>empty</code>, and override the <code>trigger</code> method with <code>allRequirements</code>.
</p><pre><code class="prettyprint lang-scala">package sbthello

import sbt._
import Keys._

object HelloPlugin2 extends AutoPlugin {
  override def trigger = allRequirements
  override lazy val buildSettings = Seq(commands += helloCommand)
  lazy val helloCommand =
    Command.command(&quot;hello&quot;) { (state: State) =&gt;
      println(&quot;Hi!&quot;)
      state
    }
}
</code></pre><p>The build user still needs to include this plugin in <code>project/plugins.sbt</code>, but it is no longer needed to be included in <code>build.sbt</code>. This becomes more interesting when you do specify a plugin with requirements. Let’s modify the <code>SbtLessPlugin</code> so that it depends on another plugin:
</p><pre><code class="prettyprint lang-scala">package sbtless
import sbt._
import Keys._
object SbtLessPlugin extends AutoPlugin {
  override def trigger = allRequirements
  override def requires = SbtJsTaskPlugin
  override lazy val projectSettings = ...
}
</code></pre><p>As it turns out, <code>PlayScala</code> plugin (in case you didn’t know, the Play framework is an sbt plugin) lists <code>SbtJsTaskPlugin</code> as one of its required plugins. So, if we define a <code>build.sbt</code> with:
</p><pre><code class="prettyprint lang-scala">lazy val root = (project in file(&quot;.&quot;))
  .enablePlugins(PlayScala)
</code></pre><p>then the setting sequence from <code>SbtLessPlugin</code> will be automatically appended somewhere after the settings from <code>PlayScala</code>.
</p><p>This allows plugins to silently, and correctly, extend existing plugins with more features.  It also can help remove the burden of ordering from the user, allowing the plugin authors greater freedom and power when providing feature for their users.
</p><h4 id="Controlling+the+import+with+autoImport">Controlling the import with autoImport<a href="#Controlling+the+import+with+autoImport" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>When an auto plugin provides a stable field such as <code>val</code> or <code>object</code>
named <code>autoImport</code>, the contents of the field are wildcard imported
in <code>set</code>, <code>eval</code>, and <code>.sbt</code> files. In the next example, we’ll replace
our hello command with a task to get the value of <code>greeting</code> easily.
In practice, it’s recommended <a href="Plugins-Best-Practices.html#Use+settings+and+tasks.+Avoid+commands.">to prefer settings or tasks to commands</a>.
</p><pre><code class="prettyprint lang-scala">package sbthello

import sbt._
import Keys._

object HelloPlugin3 extends AutoPlugin {
  object autoImport {
    val greeting = settingKey[String](&quot;greeting&quot;)
    val hello = taskKey[Unit](&quot;say hello&quot;)
  }
  import autoImport._
  override def trigger = allRequirements
  override lazy val buildSettings = Seq(
    greeting := &quot;Hi!&quot;,
    hello := helloTask.value)
  lazy val helloTask =
    Def.task {
      println(greeting.value)
    }
}
</code></pre><p>Typically, <code>autoImport</code> is used to provide new keys - <code>SettingKey</code>s, <code>TaskKey</code>s,
or <code>InputKey</code>s - or core methods without requiring an import or qualification.
</p><h4 id="Example+Plugin">Example Plugin<a href="#Example+Plugin" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>An example of a typical plugin:
</p><p><code>build.sbt</code>:
</p><pre><code class="prettyprint lang-scala">ThisBuild / version := &quot;0.1.0-SNAPSHOT&quot;
ThisBuild / organization := &quot;com.example&quot;
ThisBuild / homepage := Some(url(&quot;https://github.com/sbt/sbt-obfuscate&quot;))

lazy val root = (project in file(&quot;.&quot;))
  .enablePlugins(SbtPlugin)
  .settings(
    name := &quot;sbt-obfuscate&quot;,
    pluginCrossBuild / sbtVersion := {
      scalaBinaryVersion.value match {
        case &quot;2.12&quot; =&gt; &quot;1.2.8&quot; // set minimum sbt version
      }
    }
  )
</code></pre><p><code>ObfuscatePlugin.scala</code>:
</p><pre><code class="prettyprint lang-scala">package sbtobfuscate

import sbt._
import sbt.Keys._

object ObfuscatePlugin extends AutoPlugin {
  // by defining autoImport, the settings are automatically imported into user's `*.sbt`
  object autoImport {
    // configuration points, like the built-in `version`, `libraryDependencies`, or `compile`
    val obfuscate = taskKey[Seq[File]](&quot;Obfuscates files.&quot;)
    val obfuscateLiterals = settingKey[Boolean](&quot;Obfuscate literals.&quot;)

    // default values for the tasks and settings
    lazy val baseObfuscateSettings: Seq[Def.Setting[_]] = Seq(
      obfuscate := {
        Obfuscate(sources.value, (obfuscateLiterals in obfuscate).value)
      },
      obfuscateLiterals in obfuscate := false
    )
  }

  import autoImport._
  override def requires = sbt.plugins.JvmPlugin

  // This plugin is automatically enabled for projects which are JvmPlugin.
  override def trigger = allRequirements

  // a group of settings that are automatically added to projects.
  override val projectSettings =
    inConfig(Compile)(baseObfuscateSettings) ++
    inConfig(Test)(baseObfuscateSettings)
}

object Obfuscate {
  def apply(sources: Seq[File], obfuscateLiterals: Boolean): Seq[File] = {
    // TODO obfuscate stuff!
    sources
  }
}
</code></pre><h4 id="Usage+example">Usage example<a href="#Usage+example" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>A build definition that uses the plugin might look like. <code>obfuscate.sbt</code>:
</p><pre><code class="prettyprint lang-scala">obfuscateLiterals in obfuscate := true
</code></pre><h4 id="Global+plugins+example">Global plugins example<a href="#Global+plugins+example" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>The simplest global plugin definition is declaring a library or plugin
in <code>$HOME/.sbt/1.0/plugins/build.sbt</code>:
</p><pre><code class="prettyprint lang-scala">libraryDependencies += &quot;org.example&quot; %% &quot;example-plugin&quot; % &quot;0.1&quot;
</code></pre><p>This plugin will be available for every sbt project for the current
user.
</p><p>In addition:
</p><ul><li>Jars may be placed directly in <code>$HOME/.sbt/1.0/plugins/lib/</code>
and will be available to every build definition for the current user.
</li><li>Dependencies on plugins built from source may be declared in
<code>$HOME/.sbt/1.0/plugins/project/Build.scala</code> as described at
<a href="Full-Def.html">.scala build definition</a>.
</li><li>A Plugin may be directly defined in Scala
source files in <code>$HOME/.sbt/1.0/plugins/</code>, such as
<code>$HOME/.sbt/1.0/plugins/MyPlugin.scala</code>.
<code>$HOME/.sbt/1.0/plugins//build.sbt</code>
should contain <code>sbtPlugin := true</code>. This can be used for quicker
turnaround when developing a plugin initially:
</li></ul><ol><li>Edit the global plugin code
</li><li><code>reload</code> the project you want to use the modified plugin in
</li><li><p>sbt will rebuild the plugin and use it for the project.
</p><p>   Additionally, the plugin will be available in other projects on
   the machine without recompiling again. This approach skips the
   overhead of <code>publishLocal</code> and <code>clean</code>ing the plugins directory of the
   project using the plugin.
</p></li></ol><p>These are all consequences of <code>$HOME/.sbt/1.0/plugins/</code> being a standard
project whose classpath is added to every sbt project’s build
definition.
</p><h3 id="Using+a+library+in+a+build+definition+example">Using a library in a build definition example<a href="#Using+a+library+in+a+build+definition+example" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>As an example, we’ll add the Grizzled Scala library as a plugin.
Although this does not provide sbt-specific functionality, it
demonstrates how to declare plugins.
</p><h4 id="1a%29+Manually+managed">1a) Manually managed<a href="#1a%29+Manually+managed" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><ol><li>Download the jar manually from
<a href="https://oss.sonatype.org/content/repositories/releases/org/clapper/grizzled-scala_2.8.1/1.0.4/grizzled-scala_2.8.1-1.0.4.jar">https://oss.sonatype.org/content/repositories/releases/org/clapper/grizzled-scala<em>2.8.1/1.0.4/grizzled-scala</em>2.8.1-1.0.4.jar</a>
</li><li>Put it in <code>project/lib/</code>
</li></ol><h4 id="1b%29+Automatically+managed%3A+direct+editing+approach">1b) Automatically managed: direct editing approach<a href="#1b%29+Automatically+managed%3A+direct+editing+approach" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>Edit <code>project/plugins.sbt</code> to contain:
</p><pre><code class="prettyprint lang-scala">libraryDependencies += &quot;org.clapper&quot; %% &quot;grizzled-scala&quot; % &quot;1.0.4&quot;
</code></pre><p>If sbt is running, do <code>reload</code>.
</p><h4 id="1c%29+Automatically+managed%3A+command-line+approach">1c) Automatically managed: command-line approach<a href="#1c%29+Automatically+managed%3A+command-line+approach" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>We can change to the plugins project in <code>project/</code> using
<code>reload plugins</code>.
</p><pre><code class="">$ sbt
&gt; reload plugins
[info] Set current project to default (in build file:/Users/sbt/demo2/project/)
&gt;
</code></pre><p>Then, we can add dependencies like usual and save them to
<code>project/plugins.sbt</code>. It is useful, but not required, to run <code>update</code>
to verify that the dependencies are correct.
</p><pre><code class="">&gt; set libraryDependencies += &quot;org.clapper&quot; %% &quot;grizzled-scala&quot; % &quot;1.0.4&quot;
...
&gt; update
...
&gt; session save
...
</code></pre><p>To switch back to the main project use <code>reload return</code>:
</p><pre><code class="">&gt; reload return
[info] Set current project to root (in build file:/Users/sbt/demo2/)
</code></pre><h4 id="1d%29+Project+dependency">1d) Project dependency<a href="#1d%29+Project+dependency" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>This variant shows how to use sbt’s external project support to declare
a source dependency on a plugin. This means that the plugin will be
built from source and used on the classpath.
</p><p>Edit <code>project/plugins.sbt</code>
</p><pre><code class="prettyprint lang-scala">lazy val root = (project in file(&quot;.&quot;)).dependsOn(assemblyPlugin)

lazy val assemblyPlugin = RootProject(uri(&quot;git://github.com/sbt/sbt-assembly&quot;))
</code></pre><p>If sbt is running, run <code>reload</code>.
</p><p>Note that this approach can be useful when developing a plugin. A
project that uses the plugin will rebuild the plugin on <code>reload</code>. This
saves the intermediate steps of <code>publishLocal</code> and <code>update</code>. It can also
be used to work with the development version of a plugin from its
repository.
</p><p>It is however recommended to explicitly specify the commit or tag by appending
it to the repository as a fragment:
</p><pre><code class="prettyprint lang-scala">lazy val assemblyPlugin = uri(&quot;git://github.com/sbt/sbt-assembly#0.9.1&quot;)
</code></pre><p>One caveat to using this method is that the local sbt will try to run
the remote plugin’s build. It is quite possible that the plugin’s own
build uses a different sbt version, as many plugins cross-publish for
several sbt versions. As such, it is recommended to stick with binary
artifacts when possible.
</p><h4 id="2%29+Use+the+library">2) Use the library<a href="#2%29+Use+the+library" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>Grizzled Scala is ready to be used in build definitions. This includes
the <code>eval</code> and <code>set</code> commands and <code>.sbt</code> and <code>project/*.scala</code> files.
</p><pre><code class="">&gt; eval grizzled.sys.os
</code></pre><p>In a <code>build.sbt</code> file:
</p><pre><code class="prettyprint lang-scala">import grizzled.sys._
import OperatingSystem._

libraryDependencies ++=
    if(os == Windows)
        Seq(&quot;org.example&quot; % &quot;windows-only&quot; % &quot;1.0&quot;)
    else
        Seq.empty
</code></pre><h3 id="Best+Practices">Best Practices<a href="#Best+Practices" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>If you’re a plugin writer, please consult the <a href="Plugins-Best-Practices.html">Plugins Best Practices</a>
page; it contains a set of guidelines to help you ensure that your
plugin is consistent and plays well with other plugins.
</p><p>For cross building sbt plugins see also <a href="Cross-Build-Plugins.html">Cross building plugins</a>.
</p><div class="bottom nav">
                <div class="row">
                  <div class="col-md-auto">
                    <a href="Plugins-Best-Practices.html">
                      <div class="arrowitem">
                        <span class="arrow">&gt;</span>
                      </div>

                      <div class="arrowitem">
                        <em>Next page</em><br/>
                        Plugins Best Practices
                      </div>

                    </a>
                  </div>
                </div>
                <div class="row w-100">
        <div class="col-md-auto ml-auto">
          <ul class="language-bar">
            
          </ul>
        </div>
      </div>
              </div>
                  </div>
                </div>
          </div> <!-- row -->
        </div>
        <div class="header">
          <link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700,900,400italic,700italic" rel="stylesheet" type="text/css">
<!-- Algolia stylesheet -->
<link href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" rel="stylesheet" type = "text/css">
<div class="container-fluid top nav">
  <div class="row w-100">
    <div class="col-md-4">
      <div class="logo">
        <a href="../../index.html"><img src="files/sbt-logo.svg" alt="sbt"></a>
        <span class="versions"><select id="versions"></select></span>
      </div>
    </div>
    <div class="col-md-8">
        <div class="docsearch">
          <input type="text" id="doc-search-bar" placeholder="Search...">
          <ul class="result-container" id="result-container" style="display: none;"></ul>
        </div>
        <div class="nav" id="topbar">
          <a href="../../learn.html">Learn</a>
          <a href="../../download.html">Download</a>
          <a href="../../support.html">Support</a>
          <a href="../../community.html">Get Involved</a>
          <a id="source-code" href="https://github.com/sbt/sbt"><img src="files/github-logo-teal.svg" alt="Source code" class="social"></a>
          <a id="twitter" href="https://twitter.com/scala_sbt"><img src="files/twitter-logo-teal.svg" alt="sbt on Twitter" class="social"></a>
          <a id="edit-on-github" href="https://github.com/sbt/website/edit/develop/src/reference/02-DetailTopics/05-Plugins-and-Best-Practices/02-Plugins.md"><img src="files/octicon-pencil.svg" alt="Edit on GitHub"></a>
        </div>
    </div>
  </div>
</div>
<script type="text/javascript" async>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-41449189-1', 'scala-sbt.org');
ga('send', 'pageview');
</script>
<script type="text/javascript" async>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-23127719-1', 'lightbend.com', {'allowLinker': true, 'name': 'tsTracker'});
  ga('tsTracker.require', 'linker');
  ga('tsTracker.linker:autoLink', ['lightbend.com','playframework.com','scala-lang.org','scaladays.org','spray.io','akka.io','scala-sbt.org']);
  ga('tsTracker.send', 'pageview');
</script>
<script type="text/javascript">
$(function() {
var scrollDown = function() {
if (window.location.hash !== "") {
  setTimeout(function() { $(window).scrollTop($(window).scrollTop() - 120); }, 100);
}
}
scrollDown();
$(window).bind('hashchange', function() {
scrollDown();
});
});
</script>

        </div>
        <div class="footer">
          <footer>
  <div class="container-fluid footer">
    <div class="row">
      <div class="col-md-8">
        <div class="support-item">
          <div class="support-icon">
            <svg class="svg-icon svg-icon-chat" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 97.5 85.2" enable-background="new 0 0 97.5 85.2"><path stroke="#fff" stroke-width="4.282" stroke-linecap="round" stroke-miterlimit="10" d="M27 29.5h-16.3c-4.7 0-8.6 3.9-8.6 8.6v25.7c0 4.7 3.9 8.6 8.6 8.6h2.7c.8 0 1.5.7 1.5 1.5v7.8c0 1.3 1.6 2 2.5 1l9.5-9.5c.5-.5 1.2-.8 2-.8h20.2c4.7 0 8.6-3.9 8.6-8.6v-7.8" fill="none"/><path fill="#fff" d="M85 0h-40c-6.9 0-12.5 5.6-12.5 12.5v33.4c0 2.2 1.8 4.1 4.1 4.1h29.9c.7 0 1.3.3 1.8.7l10 10c1.6 1.6 4.3.5 4.3-1.8v-6.5c0-1.4 1.1-2.5 2.5-2.5 6.9 0 12.5-5.6 12.5-12.5v-25c-.1-6.8-5.8-12.4-12.6-12.4z"/></svg>
          </div>
          <div class="support-detail">
            <h2>Community Support</h2>
            <a href="https://stackoverflow.com/questions/tagged/sbt">StackOverflow</a>
          </div>
        </div>
        <div class="support-item">
          <div class="support-icon">
            <svg id="lightbend-icon-reverse" class="svg-icon svg-icon-lightbend-reverse" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 302 262"><title>lightbend-icon</title><g id="icon"><path d="M1,195v56a10,10,0,0,0,10,10H291a10,10,0,0,0,10-10V195a557.85,557.85,0,0,1-150,20A557.85,557.85,0,0,1,1,195Z" style="fill:#fff"/><path d="M291,1H11A10,10,0,0,0,1,11V176a539.94,539.94,0,0,0,150,21,539.94,539.94,0,0,0,150-21V11A10,10,0,0,0,291,1Z" style="fill:#fff"/></g></svg>
          </div>
          <div class="support-detail">
            <h2>Commercial Support</h2>
            <a href="https://www.lightbend.com/services/expert-support">Lightbend Subscription</a>
            <a href="https://www.lightbend.com/services/training">Training</a>
            <a href="https://www.lightbend.com/services/consulting">Consulting</a>
          </div>
        </div>
      </div>
      <div class="col-md-4 text-right ts">
        &copy; 2016-<script>document.write(new Date().getFullYear())</script> Lightbend Inc.
        <a href="https://www.lightbend.com">
          <img src="files/lightbend-reverse.svg" alt="Lightbend, Inc.">
        </a>
      </div>
    </div>
  </div>
</footer><script src="/assets/versions.js"></script><script src="/assets/set-versions.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript"> docsearch({
  apiKey: 'e47ee877a07ea1c48722f08430d54913',
  indexName: 'scala-sbt',
  inputSelector: '#doc-search-bar',
  debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
        </div>
        
        <div class="highlight-outer">
              <div class="highlight-menu">
                <ul>
                  <li><button id="highlight-button-twitter"><img src="img/twitter-bird-dark-bgs.png"/></button></li>
                </ul>
              </div>
            </div>
      </body>
    </html>