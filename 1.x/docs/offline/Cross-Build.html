<!DOCTYPE html SYSTEM "about:legacy-compat">
<html manifest="pamflet.manifest">
      <head>
        <meta charset="utf-8"/>
        <meta content="width=device-width, initial-scale=1" name="viewport"/>
        <title>sbt Reference Manual — Cross-building</title>
        <link rel="shortcut icon" href="favicon.ico"/>
        <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css"/>
        <link rel="stylesheet" href="css/pamflet.css" type="text/css" media="screen, projection"/>
        <link rel="stylesheet" href="css/pamflet-print.css" type="text/css" media="print"/>
        <link rel="stylesheet" href="css/pamflet-grid.css" type="text/css" media="screen and (min-device-width: 800px), projection"/>
        <link rel="stylesheet" href="css/color_scheme-redmond.css" type="text/css" media="screen, projection"/>
        <link rel="stylesheet" href="css/color_scheme-github.css" type="text/css" media="screen, projection"/>
        <link rel="stylesheet" href="css/color_scheme-monokai.css" type="text/css" media="screen, projection"/>
        <link rel="stylesheet" href="css/pamfletheight_80px_2em.css" type="text/css" media="screen and (min-device-width: 800px), projection"/>
        <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
        <script type="text/javascript" src="js/bootstrap.bundle.min.js"></script>
        <script type="text/javascript" src="js/pamflet.js"></script>
        <script type="text/javascript">
          Pamflet.page.language = 'en';
        </script>
        <script type="text/javascript" src="js/prettify/prettify.js"></script><script type="text/javascript" src="js/prettify/lang-scala.js"></script><link type="text/css" rel="stylesheet" href="css/prettify.css"/><script type="text/javascript"><!--
        window.onload=function() { prettyPrint(); };
      --></script>
        <link rel="stylesheet" href="css/custom.css" type="text/css" media="screen, projection"/>
        
        <script type="text/javascript">
              Pamflet.twitter = '#sbt #scala';
            </script>
      </head>
      <body class="color_scheme-github">
        <div class="container-fluid contentswrapper h-100">
          <div class="row minh-100">
          <div class="col-md-4 col-xl-3 toccolumn leftcolumn">
                  <div class="lefttocwrapper">
      <div class="tocwrapper">
        
        <div class="tocbody show" id="toc">
        
        <div><a href="index.html">sbt Reference Manual</a></div><ol class="toc"> <li><div><a href="Getting-Started.html">Getting Started with sbt</a></div><ol class="toc"> <li><div><a href="Setup.html">Installing sbt</a></div><ol class="toc"> <li><div><a href="Installing-sbt-on-Mac.html">Installing sbt on macOS</a></div></li><li><div><a href="Installing-sbt-on-Windows.html">Installing sbt on Windows</a></div></li><li><div><a href="Installing-sbt-on-Linux.html">Installing sbt on Linux</a></div></li> </ol></li><li><div><a href="sbt-by-example.html">sbt by example</a></div></li><li><div><a href="Directories.html">Directory structure</a></div></li><li><div><a href="Running.html">Running</a></div></li><li><div><a href="Basic-Def.html">Build definition</a></div></li><li><div><a href="Multi-Project.html">Multi-project builds</a></div></li><li><div><a href="Task-Graph.html">Task graph</a></div></li><li><div><a href="Scopes.html">Scopes</a></div></li><li><div><a href="Appending-Values.html">Appending values</a></div></li><li><div><a href="Scope-Delegation.html">Scope delegation (.value lookup)</a></div></li><li><div><a href="Library-Dependencies.html">Library dependencies</a></div></li><li><div><a href="Using-Plugins.html">Using plugins</a></div></li><li><div><a href="Custom-Settings.html">Custom settings and tasks</a></div></li><li><div><a href="Organizing-Build.html">Organizing the build</a></div></li><li><div><a href="Summary.html">Getting Started summary</a></div></li> </ol></li><li><div><a href="Faq.html">Frequently Asked Questions</a></div><ol class="toc">  </ol></li><li><div><a href="General-Info.html">General Information</a></div><ol class="toc"> <li><div><a href="Credits.html">Credits</a></div></li><li><div><a href="Community-Plugins.html">Community Plugins</a></div></li><li><div><a href="Repository-Roles.html">Community Repository Policy</a></div></li><li><div><a href="Bintray-For-Plugins.html">Bintray For Plugins</a></div></li><li><div><a href="Setup-Notes.html">Setup Notes</a></div></li><li><div><a href="Using-Sonatype.html">Using Sonatype</a></div></li><li><div><a href="Contributing-to-sbt.html">Contributing to sbt</a></div></li><li><div><a href="Changes.html">Changes</a></div><ol class="toc"> <li><div><a href="Migrating-from-sbt-013x.html">Migrating from sbt 0.13.x</a></div></li><li><div><a href="sbt-1.4-Release-Notes.html">sbt 1.4.x releases</a></div></li><li><div><a href="sbt-1.3-Release-Notes.html">sbt 1.3.x releases</a></div></li><li><div><a href="sbt-1.2-Release-Notes.html">sbt 1.2.x releases</a></div></li><li><div><a href="sbt-1.1-Release-Notes.html">sbt 1.1.x releases</a></div></li><li><div><a href="sbt-1.0-Release-Notes.html">sbt 1.0.x releases</a></div></li> </ol></li> </ol></li><li><div><a href="Detailed-Topics.html">Detailed Topics</a></div><ol class="toc"> <li><div><a href="Using-sbt.html">Using sbt</a></div><ol class="toc"> <li><div><a href="Command-Line-Reference.html">Command Line Reference</a></div></li><li><div><a href="Console-Project.html">Console Project</a></div></li><li><div class="current">Cross-building</div></li><li><div><a href="Inspecting-Settings.html">Interacting with the Configuration System</a></div></li><li><div><a href="Triggered-Execution.html">Triggered Execution</a></div></li><li><div><a href="Scripts.html">Scripts, REPL, and Dependencies</a></div></li><li><div><a href="sbt-server.html">sbt Server</a></div></li><li><div><a href="Understanding-Recompilation.html">Understanding Incremental Recompilation</a></div></li> </ol></li><li><div><a href="Configuration-Index.html">Configuration</a></div><ol class="toc"> <li><div><a href="Classpaths.html">Classpaths, sources, and resources</a></div></li><li><div><a href="Compiler-Plugins.html">Compiler Plugin Support</a></div></li><li><div><a href="Configuring-Scala.html">Configuring Scala</a></div></li><li><div><a href="Forking.html">Forking</a></div></li><li><div><a href="Global-Settings.html">Global Settings</a></div></li><li><div><a href="Java-Sources.html">Java Sources</a></div></li><li><div><a href="Mapping-Files.html">Mapping Files</a></div></li><li><div><a href="Local-Scala.html">Local Scala</a></div></li><li><div><a href="Macro-Projects.html">Macro Projects</a></div></li><li><div><a href="Paths.html">Paths</a></div></li><li><div><a href="Parallel-Execution.html">Parallel Execution</a></div></li><li><div><a href="Process.html">External Processes</a></div></li><li><div><a href="Running-Project-Code.html">Running Project Code</a></div></li><li><div><a href="Testing.html">Testing</a></div></li><li><div><a href="In-Process-Classloaders.html">In process class loading</a></div></li><li><div><a href="Globs.html">Globs</a></div></li><li><div><a href="Remote-Caching.html">Remote Caching</a></div></li> </ol></li><li><div><a href="Dependency-Management-Index.html">Dependency Management</a></div><ol class="toc"> <li><div><a href="Artifacts.html">Artifacts</a></div></li><li><div><a href="Dependency-Management-Flow.html">Dependency Management Flow</a></div></li><li><div><a href="Library-Management.html">Library Management</a></div></li><li><div><a href="Proxy-Repositories.html">Proxy Repositories</a></div></li><li><div><a href="Publishing.html">Publishing</a></div></li><li><div><a href="Resolvers.html">Resolvers</a></div></li><li><div><a href="Update-Report.html">Update Report</a></div></li><li><div><a href="Cached-Resolution.html">Cached Resolution</a></div></li> </ol></li><li><div><a href="Tasks-and-Commands.html">Tasks and Commands</a></div><ol class="toc"> <li><div><a href="Tasks.html">Tasks</a></div></li><li><div><a href="Caching.html">Caching</a></div></li><li><div><a href="Input-Tasks.html">Input Tasks</a></div></li><li><div><a href="Commands.html">Commands</a></div></li><li><div><a href="Parsing-Input.html">Parsing and tab completion</a></div></li><li><div><a href="Build-State.html">State and actions</a></div></li><li><div><a href="Task-Inputs.html">Tasks/Settings: Motivation</a></div></li> </ol></li><li><div><a href="Plugins-and-Best-Practices.html">Plugins and Best Practices</a></div><ol class="toc"> <li><div><a href="Best-Practices.html">General Best Practices</a></div></li><li><div><a href="Plugins.html">Plugins</a></div></li><li><div><a href="Plugins-Best-Practices.html">Plugins Best Practices</a></div></li><li><div><a href="GitHub-Actions-with-sbt.html">Setting up GitHub Actions with sbt</a></div></li><li><div><a href="Travis-CI-with-sbt.html">Setting up Travis CI with sbt</a></div></li><li><div><a href="Testing-sbt-plugins.html">Testing sbt plugins</a></div></li><li><div><a href="sbt-new-and-Templates.html">sbt new and Templates</a></div></li><li><div><a href="Cross-Build-Plugins.html">Cross building plugins</a></div></li> </ol></li> </ol></li><li><div><a href="Howto.html">How to…</a></div><ol class="toc"> <li><div><a href="Howto-Classpaths.html">Classpaths</a></div></li><li><div><a href="Howto-Customizing-Paths.html">Customizing paths</a></div></li><li><div><a href="Howto-Generating-Files.html">Generating files</a></div></li><li><div><a href="Howto-Inspect-the-Build.html">Inspect the build</a></div></li><li><div><a href="Howto-Interactive-Mode.html">Interactive mode</a></div></li><li><div><a href="Howto-Logging.html">Configure and use logging</a></div></li><li><div><a href="Howto-Project-Metadata.html">Project metadata</a></div></li><li><div><a href="Howto-Package.html">Configure packaging</a></div></li><li><div><a href="Howto-Running-Commands.html">Running commands</a></div></li><li><div><a href="Howto-Scala.html">Configure and use Scala</a></div></li><li><div><a href="Howto-Scaladoc.html">Generate API documentation</a></div></li><li><div><a href="Define+Custom+Tasks.html">Define Custom Tasks</a></div></li><li><div><a href="Howto-Startup.html">How to take an action on startup</a></div></li><li><div><a href="Howto-Track-File-Inputs-and-Outputs.html">Track file inputs and outputs</a></div></li><li><div><a href="Troubleshoot-Memory-Issues.html">Troubleshoot memory issues</a></div></li><li><div><a href="Howto-Sequencing.html">Sequencing</a></div><ol class="toc"> <li><div><a href="Howto-Sequential-Task.html">Defining a sequential task with Def.sequential</a></div></li><li><div><a href="Howto-Dynamic-Task.html">Defining a dynamic task with Def.taskDyn</a></div></li><li><div><a href="Howto-After-Input-Task.html">Doing something after an input task</a></div></li><li><div><a href="Howto-Dynamic-Input-Task.html">Defining a dynamic input task with Def.inputTaskDyn</a></div></li><li><div><a href="Howto-Sequence-using-Commands.html">How to sequence using commands</a></div></li> </ol></li><li><div><a href="Custom-Dependency-Configuration.html">How to define a custom dependency configuration</a></div></li><li><div><a href="Examples.html">Examples</a></div><ol class="toc"> <li><div><a href="Basic-Def-Examples.html">.sbt build examples</a></div></li><li><div><a href="Scala-Files-Example.html">.sbt build with .scala files example</a></div></li><li><div><a href="Advanced-Configurations-Example.html">Advanced configurations example</a></div></li><li><div><a href="Advanced-Command-Example.html">Advanced command example</a></div></li> </ol></li> </ol></li><li><div><a href="Name-Index.html">Index</a></div></li><li><div><a href="Developers-Guide.html">Developer’s Guide (Work in progress)</a></div><ol class="toc"> <li><div><a href="Modularization.html">Modularization</a></div><ol class="toc"> <li><div><a href="Module-Summary.html">Module summary</a></div></li> </ol></li><li><div><a href="Coding-Guideline.html">sbt Coding Guideline</a></div><ol class="toc">  </ol></li><li><div><a href="Datatype.html">sbt-datatype</a></div><ol class="toc">  </ol></li><li><div><a href="Compiler-Interface.html">Compiler Interface</a></div><ol class="toc"> <li><div><a href="Version-Specific-Sources.html">Fetching the most specific sources</a></div></li> </ol></li><li><div><a href="Sbt-Launcher.html">sbt Launcher</a></div><ol class="toc"> <li><div><a href="Launcher-Getting-Started.html">Getting Started with the sbt launcher</a></div></li><li><div><a href="Launcher-Architecture.html">Sbt Launcher Architecture</a></div></li><li><div><a href="Launcher-Configuration.html">sbt Launcher Configuration</a></div></li> </ol></li><li><div><a href="DevGuide-Notes.html">Notes</a></div><ol class="toc"> <li><div><a href="Core-Principles.html">Core Principles</a></div></li><li><div><a href="Settings-Core.html">Settings Core</a></div></li><li><div><a href="Setting-Initialization.html">Setting Initialization</a></div></li><li><div><a href="Command-Line-Applications.html">Creating Command Line Applications Using sbt</a></div></li> </ol></li> </ol></li><li><div><a href="Archived+pages.html">Archived pages</a></div><ol class="toc"> <li><div><a href="Hello.html">Hello, World</a></div></li> </ol></li><li class="generated"><div><a href="Contents+in+Depth.html">Contents in Depth</a></div></li><li class="generated"><div><a href="Combined+Pages.html">Combined Pages</a></div></li> </ol></div>
      </div>
      </div>
                </div><div class="col-md-8 col-xs-9">
                  <div class="rightcolumn contents">
                  <h2 id="Cross-building">Cross-building<a href="#Cross-building" class="header-link"><span class="header-link-content">&nbsp;</span></a></h2><h3 id="Introduction">Introduction<a href="#Introduction" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>Different versions of Scala can be binary incompatible, despite
maintaining source compatibility. This page describes how to use <code>sbt</code>
to build and publish your project against multiple versions of Scala and
how to use libraries that have done the same.
</p><p>For cross building sbt plugins see also <a href="Cross-Build-Plugins.html">Cross building plugins</a>.
</p><h3 id="Publishing+conventions">Publishing conventions<a href="#Publishing+conventions" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>The underlying mechanism used to indicate which version of Scala a
library was compiled against is to append <code>_&lt;scala-binary-version&gt;</code> to the
library’s name. For example, the artifact name <code>dispatch-core_2.12</code> is used
when compiled against Scala 2.12.0, 2.12.1 or any 2.12.x version. This fairly simple approach
allows interoperability with users of Maven, Ant and other build tools.
</p><p>For pre-prelease versions of Scala such as 2.13.0-RC1 and for versions prior to 2.10.x,
full version is used as the suffix.
</p><p>The rest of this page describes how sbt handles this for you as part
of cross-building.
</p><h3 id="Using+cross-built+libraries">Using cross-built libraries<a href="#Using+cross-built+libraries" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>To use a library built against multiple versions of Scala, double the
first <code>%</code> in an inline dependency to be <code>%%</code>. This tells <code>sbt</code> that it
should append the current version of Scala being used to build the
library to the dependency’s name. For example:
</p><pre><code class="prettyprint lang-scala">libraryDependencies += &quot;net.databinder.dispatch&quot; %% &quot;dispatch-core&quot; % &quot;0.13.3&quot;
</code></pre><p>A nearly equivalent, manual alternative for a fixed version of Scala is:
</p><pre><code class="prettyprint lang-scala">libraryDependencies += &quot;net.databinder.dispatch&quot; % &quot;dispatch-core_2.12&quot; % &quot;0.13.3&quot;
</code></pre><h3 id="Cross+building+a+project+using+sbt-projectmatrix">Cross building a project using sbt-projectmatrix<a href="#Cross+building+a+project+using+sbt-projectmatrix" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>Consider using <a href="https://github.com/sbt/sbt-projectmatrix">sbt-projectmatrix</a> that
is capable of cross building across Scala versions and different platforms in parallel.
</p><h3 id="Cross+building+a+project+statefully">Cross building a project statefully<a href="#Cross+building+a+project+statefully" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>Define the versions of Scala to build against in the
<code>crossScalaVersions</code> setting. Versions of Scala 2.10.2 or later are
allowed. For example, in a <code>.sbt</code> build definition:
</p><pre><code class="prettyprint lang-scala">lazy val scala212 = &quot;2.12.13&quot;
lazy val scala211 = &quot;2.11.12&quot;
lazy val supportedScalaVersions = List(scala212, scala211)

ThisBuild / organization := &quot;com.example&quot;
ThisBuild / version      := &quot;0.1.0-SNAPSHOT&quot;
ThisBuild / scalaVersion := scala212

lazy val root = (project in file(&quot;.&quot;))
  .aggregate(util, core)
  .settings(
    // crossScalaVersions must be set to Nil on the aggregating project
    crossScalaVersions := Nil,
    publish / skip := true
  )

lazy val core = (project in file(&quot;core&quot;))
  .settings(
    crossScalaVersions := supportedScalaVersions,
    // other settings
  )

lazy val util = (project in file(&quot;util&quot;))
  .settings(
    crossScalaVersions := supportedScalaVersions,
    // other settings
  )
</code></pre><p><strong>Note</strong>: <code>crossScalaVersions</code> must be set to <code>Nil</code> on the root project to avoid double publishing.
</p><p>To build against all versions listed in <code>crossScalaVersions</code>, prefix
the action to run with <code>+</code>. For example:
</p><pre><code class="">&gt; + test
</code></pre><p>A typical way to use this feature is to do development on a single Scala
version (no <code>+</code> prefix) and then cross-build (using <code>+</code>) occasionally
and when releasing.
</p><h3 id="Change+settings+depending+on+the+Scala+version">Change settings depending on the Scala version<a href="#Change+settings+depending+on+the+Scala+version" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>Here’s how we can change some settings depending on the Scala version.
<code>CrossVersion.partialVersion(scalaVersion.value)</code> returns <code>Option[(Int, Int)]</code> containing
the first two segments of the Scala version.
</p><p>This can be useful for instance if you include a dependency that requires the macro paradise
compiler plugin for Scala 2.12 and the <code>-Ymacro-annotations</code> compiler option for Scala 2.13.
</p><pre><code class="prettyprint lang-scala">lazy val core = (project in file(&quot;core&quot;))
  .settings(
    crossScalaVersions := supportedScalaVersions,
    libraryDependencies ++= {
      CrossVersion.partialVersion(scalaVersion.value) match {
        case Some((2, n)) if n &lt;= 12 =&gt;
          List(compilerPlugin(&quot;org.scalamacros&quot; % &quot;paradise&quot; % &quot;2.1.1&quot; cross CrossVersion.full))
        case _                       =&gt; Nil
      }
    },
    Compile / scalacOptions ++= {
      CrossVersion.partialVersion(scalaVersion.value) match {
        case Some((2, n)) if n &lt;= 12 =&gt; Nil
        case _                       =&gt; List(&quot;-Ymacro-annotations&quot;)
      }
    },
  )
</code></pre><a name="crossPaths"></a><h4 id="Scala-version+specific+source+directory">Scala-version specific source directory<a href="#Scala-version+specific+source+directory" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>In addition to <code>src/main/scala/</code> directory, <code>src/main/scala-&lt;scala binary version&gt;/</code>
directory is included as a source directory.
For, example if the current subproject’s <code>scalaVersion</code> is 2.12.10, then
<code>src/main/scala-2.12</code> is included as a Scala-version specific source.
</p><p>By <code>crossPaths</code> setting to <code>false</code> you can opt out of both Scala-version source directory
and the <code>_&lt;scala-binary-version&gt;</code> publishing convention. This might be useful for non-Scala projects.
</p><p>Similarly, the build products such as <code>*.class</code> files are written into
<code>crossTarget</code> directory, which by default is <code>target/scala-&lt;scala binary version&gt;</code>.
</p><h4 id="Cross+building+with+a+Java+project">Cross building with a Java project<a href="#Cross+building+with+a+Java+project" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>A special care must be taken when cross building involves pure Java project.
Let’s say in the following example, <code>network</code> is a Java project, and <code>core</code> is
a Scala project that depends on <code>network</code>.
</p><pre><code class="prettyprint lang-scala">lazy val scala212 = &quot;2.12.13&quot;
lazy val scala211 = &quot;2.11.12&quot;
lazy val supportedScalaVersions = List(scala212, scala211)

ThisBuild / organization := &quot;com.example&quot;
ThisBuild / version      := &quot;0.1.0-SNAPSHOT&quot;
ThisBuild / scalaVersion := scala212

lazy val root = (project in file(&quot;.&quot;))
  .aggregate(network, core)
  .settings(
    // crossScalaVersions must be set to Nil on the aggregating project
    crossScalaVersions := Nil,
    publish / skip := false
  )

// example Java project
lazy val network = (project in file(&quot;network&quot;))
  .settings(
    // set to exactly one Scala version
    crossScalaVersions := List(scala212),
    crossPaths := false,
    autoScalaLibrary := false,
    // other settings
  )

lazy val core = (project in file(&quot;core&quot;))
  .dependsOn(network)
  .settings(
    crossScalaVersions := supportedScalaVersions,
    // other settings
  )
</code></pre><ol><li><code>crossScalaVersions</code> must be set to <code>Nil</code> on the aggregating projects such as the root.
</li><li>Java subprojects should set <code>crossPaths</code> to false, which turns off the <code>_&lt;scala-binary-version&gt;</code> publishing convention and the Scala-version specific source directory.
</li><li>Java subprojects should have exactly one Scala version in <code>crossScalaVersions</code> to avoid double publishing, typically <code>scala212</code>.
</li><li>Scala subprojects can have multiple Scala versions in <code>crossScalaVersions</code>, but must avoid aggregating Java subprojects.
</li></ol><h4 id="Switching+Scala+version">Switching Scala version<a href="#Switching+Scala+version" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>You can use <code>++ &lt;version&gt; [command]</code> to temporarily switch the Scala version currently
being used to build the subprojects given that <code>&lt;version&gt;</code> is listed in their <code>crossScalaVersions</code>.
</p><p>For example:
</p><pre><code class="">&gt; ++ 2.12.13
[info] Setting version to 2.12.13
&gt; ++ 2.11.12
[info] Setting version to 2.11.12
&gt; compile
</code></pre><p><code>&lt;version&gt;</code> should be either a version for Scala published to a repository or
the path to a Scala home directory, as in <code>++ /path/to/scala/home</code>.
See <a href="Command-Line-Reference.html">Command Line Reference</a> for details.
</p><p>When a <code>[command]</code> is passed in to <code>++</code>, it will execute the command
on the subprojects that supports the given <code>&lt;version&gt;</code>.
</p><p>For example:
</p><pre><code class="">&gt; ++ 2.11.12 -v test
[info] Setting Scala version to 2.11.12 on 1 projects.
[info] Switching Scala version on:
[info]     core (2.12.13, 2.11.12)
[info] Excluding projects:
[info]   * root ()
[info]     network (2.12.13)
[info] Reapplying settings...
[info] Set current project to core (in build file:/Users/xxx/hello/)
</code></pre><p>Sometimes you might want to force the Scala version switch regardless of the <code>crossScalaVersions</code> values.
You can use <code>++ &lt;version&gt;!</code> with exclamation mark for that.
</p><p>For example:
</p><pre><code class="">&gt; ++ 2.13.0-M5! -v
[info] Forcing Scala version to 2.13.0-M5 on all projects.
[info] Switching Scala version on:
[info]   * root ()
[info]     core (2.12.13, 2.11.12)
[info]     network (2.12.13)
</code></pre><h4 id="Cross+publishing">Cross publishing<a href="#Cross+publishing" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>The ultimate purpose of <code>+</code> is to cross-publish your
project. That is, by doing:
</p><pre><code class="">&gt; + publishSigned
</code></pre><p>you make your project available to users for different versions of
Scala. See <a href="Publishing.html">Publishing</a> for more details on publishing your project.
</p><p>In order to make this process as quick as possible, different output and
managed dependency directories are used for different versions of Scala.
For example, when building against Scala 2.12.7,
</p><ul><li><code>./target/</code> becomes <code>./target/scala_2.12/</code>
</li><li><code>./lib_managed/</code> becomes <code>./lib_managed/scala_2.12/</code>
</li></ul><p>Packaged jars, wars, and other artifacts have <code>_&lt;scala-version&gt;</code>
appended to the normal artifact ID as mentioned in the Publishing
Conventions section above.
</p><p>This means that the outputs of each build against each version of Scala
are independent of the others. sbt will resolve your dependencies for
each version separately. This way, for example, you get the version of
Dispatch compiled against 2.11 for your 2.11.x build, the version
compiled against 2.12 for your 2.12.x builds, and so on.
</p><h4 id="Overriding+the+publishing+convention">Overriding the publishing convention<a href="#Overriding+the+publishing+convention" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p><code>crossVersion</code> setting can override the publishing convention:
</p><ul><li><code>CrossVersion.disabled</code> (no suffix)
</li><li><code>CrossVersion.binary</code> (<code>_&lt;scala-binary-version&gt;</code>)
</li><li><code>CrossVersion.full</code> (<code>_&lt;scala-version&gt;</code>)
</li></ul><p>The default is either <code>CrossVersion.binary</code> or <code>CrossVersion.diabled</code>
depending on the value of <code>crossPaths</code>.
</p><p>Because (unlike Scala library) Scala compiler is not forward compatible among
the patch releases, compiler plugins should use <code>CrossVersion.full</code>.
</p><h4 id="More+about+using+cross-built+libraries">More about using cross-built libraries<a href="#More+about+using+cross-built+libraries" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>You can have fine-grained control over the behavior for different Scala versions
by using the <code>cross</code> method on <code>ModuleID</code> These are equivalent:
</p><pre><code class="prettyprint lang-scala">&quot;a&quot; % &quot;b&quot; % &quot;1.0&quot;
(&quot;a&quot; % &quot;b&quot; % &quot;1.0&quot;).cross(CrossVersion.disabled)
</code></pre><p>These are equivalent:
</p><pre><code class="prettyprint lang-scala">&quot;a&quot; %% &quot;b&quot; % &quot;1.0&quot;
(&quot;a&quot; % &quot;b&quot; % &quot;1.0&quot;).cross(CrossVersion.binary)
</code></pre><p>This overrides the defaults to always use the full Scala version instead
of the binary Scala version:
</p><pre><code class="prettyprint lang-scala">(&quot;a&quot; % &quot;b&quot; % &quot;1.0&quot;).cross(CrossVersion.full)
</code></pre><p><code>CrossVersion.patch</code> sits between <code>CrossVersion.binary</code> and <code>CrossVersion.full</code>
in that it strips off any trailing <code>-bin-...</code> suffix which is used to
distinguish variant but binary compatible Scala toolchain builds.
</p><pre><code class="prettyprint lang-scala">(&quot;a&quot; % &quot;b&quot; % &quot;1.0&quot;).cross(CrossVersion.patch)
</code></pre><p>This uses a custom function to determine the Scala version to use based
on the binary Scala version:
</p><pre><code class="prettyprint lang-scala">(&quot;a&quot; % &quot;b&quot; % &quot;1.0&quot;) cross CrossVersion.binaryMapped {
  case &quot;2.9.1&quot; =&gt; &quot;2.9.0&quot; // remember that pre-2.10, binary=full
  case &quot;2.10&quot; =&gt; &quot;2.10.0&quot; // useful if a%b was released with the old style
  case x =&gt; x
}
</code></pre><p>This uses a custom function to determine the Scala version to use based
on the full Scala version:
</p><pre><code class="prettyprint lang-scala">(&quot;a&quot; % &quot;b&quot; % &quot;1.0&quot;) cross CrossVersion.fullMapped {
  case &quot;2.9.1&quot; =&gt; &quot;2.9.0&quot;
  case x =&gt; x
}
</code></pre><p>A custom function is mainly used when cross-building and a dependency
isn’t available for all Scala versions or it uses a different convention
than the default.
</p><h4 id="Note+about+sbt-release">Note about sbt-release<a href="#Note+about+sbt-release" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>sbt-release implemented cross building support by copy-pasting sbt 0.13’s <code>+</code> implementation,
so at least as of sbt-release 1.0.10, it does not work correctly with sbt 1.x’s cross building,
which was prototyped originally as sbt-doge.
</p><p>To cross publish using sbt-release with sbt 1.x, use the following workaround:
</p><pre><code class="prettyprint lang-scala">ThisBuild / organization := &quot;com.example&quot;
ThisBuild / version      := &quot;0.1.0-SNAPSHOT&quot;
ThisBuild / scalaVersion := scala212

import ReleaseTransformations._
lazy val root = (project in file(&quot;.&quot;))
  .aggregate(util, core)
  .settings(
    // crossScalaVersions must be set to Nil on the aggregating project
    crossScalaVersions := Nil,
    publish / skip := true,

    // don't use sbt-release's cross facility
    releaseCrossBuild := false,
    releaseProcess := Seq[ReleaseStep](
      checkSnapshotDependencies,
      inquireVersions,
      runClean,
      releaseStepCommandAndRemaining(&quot;+test&quot;),
      setReleaseVersion,
      commitReleaseVersion,
      tagRelease,
      releaseStepCommandAndRemaining(&quot;+publishSigned&quot;),
      setNextVersion,
      commitNextVersion,
      pushChanges
    )
  )
</code></pre><p>This will then use the real cross (<code>+</code>) implementation for testing and publishing.
Credit for this technique goes to James Roper at <a href="https://github.com/playframework/playframework/pull/4520">playframework#4520</a> and later inventing <code>releaseStepCommandAndRemaining</code>.
</p><div class="bottom nav">
                <div class="row">
                  <div class="col-md-auto">
                    <a href="Inspecting-Settings.html">
                      <div class="arrowitem">
                        <span class="arrow">&gt;</span>
                      </div>

                      <div class="arrowitem">
                        <em>Next page</em><br/>
                        Interacting with the Configuration System
                      </div>

                    </a>
                  </div>
                </div>
                <div class="row w-100">
        <div class="col-md-auto ml-auto">
          <ul class="language-bar">
            
          </ul>
        </div>
      </div>
              </div>
                  </div>
                </div>
          </div> <!-- row -->
        </div>
        <div class="header">
          <link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700,900,400italic,700italic" rel="stylesheet" type="text/css">
<!-- Algolia stylesheet -->
<link href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" rel="stylesheet" type = "text/css">
<div class="container-fluid top nav">
  <div class="row w-100">
    <div class="col-md-4">
      <div class="logo">
        <a href="../../index.html"><img src="files/sbt-logo.svg" alt="sbt"></a>
        <span class="versions"><select id="versions"></select></span>
      </div>
    </div>
    <div class="col-md-8">
        <div class="docsearch">
          <input type="text" id="doc-search-bar" placeholder="Search...">
          <ul class="result-container" id="result-container" style="display: none;"></ul>
        </div>
        <div class="nav" id="topbar">
          <a href="../../learn.html">Learn</a>
          <a href="../../download.html">Download</a>
          <a href="../../support.html">Support</a>
          <a href="../../community.html">Get Involved</a>
          <a id="source-code" href="https://github.com/sbt/sbt"><img src="files/github-logo-teal.svg" alt="Source code" class="social"></a>
          <a id="twitter" href="https://twitter.com/scala_sbt"><img src="files/twitter-logo-teal.svg" alt="sbt on Twitter" class="social"></a>
          <a id="edit-on-github" href="https://github.com/sbt/website/edit/develop/src/reference/02-DetailTopics/01-Using-sbt/03-Cross-Build.md"><img src="files/octicon-pencil.svg" alt="Edit on GitHub"></a>
        </div>
    </div>
  </div>
</div>
<script type="text/javascript" async>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-41449189-1', 'scala-sbt.org');
ga('send', 'pageview');
</script>
<script type="text/javascript" async>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-23127719-1', 'lightbend.com', {'allowLinker': true, 'name': 'tsTracker'});
  ga('tsTracker.require', 'linker');
  ga('tsTracker.linker:autoLink', ['lightbend.com','playframework.com','scala-lang.org','scaladays.org','spray.io','akka.io','scala-sbt.org']);
  ga('tsTracker.send', 'pageview');
</script>
<script type="text/javascript">
$(function() {
var scrollDown = function() {
if (window.location.hash !== "") {
  setTimeout(function() { $(window).scrollTop($(window).scrollTop() - 120); }, 100);
}
}
scrollDown();
$(window).bind('hashchange', function() {
scrollDown();
});
});
</script>

        </div>
        <div class="footer">
          <footer>
  <div class="container-fluid footer">
    <div class="row">
      <div class="col-md-8">
        <div class="support-item">
          <div class="support-icon">
            <svg class="svg-icon svg-icon-chat" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 97.5 85.2" enable-background="new 0 0 97.5 85.2"><path stroke="#fff" stroke-width="4.282" stroke-linecap="round" stroke-miterlimit="10" d="M27 29.5h-16.3c-4.7 0-8.6 3.9-8.6 8.6v25.7c0 4.7 3.9 8.6 8.6 8.6h2.7c.8 0 1.5.7 1.5 1.5v7.8c0 1.3 1.6 2 2.5 1l9.5-9.5c.5-.5 1.2-.8 2-.8h20.2c4.7 0 8.6-3.9 8.6-8.6v-7.8" fill="none"/><path fill="#fff" d="M85 0h-40c-6.9 0-12.5 5.6-12.5 12.5v33.4c0 2.2 1.8 4.1 4.1 4.1h29.9c.7 0 1.3.3 1.8.7l10 10c1.6 1.6 4.3.5 4.3-1.8v-6.5c0-1.4 1.1-2.5 2.5-2.5 6.9 0 12.5-5.6 12.5-12.5v-25c-.1-6.8-5.8-12.4-12.6-12.4z"/></svg>
          </div>
          <div class="support-detail">
            <h2>Community Support</h2>
            <a href="https://stackoverflow.com/questions/tagged/sbt">StackOverflow</a>
          </div>
        </div>
        <div class="support-item">
          <div class="support-icon">
            <svg id="lightbend-icon-reverse" class="svg-icon svg-icon-lightbend-reverse" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 302 262"><title>lightbend-icon</title><g id="icon"><path d="M1,195v56a10,10,0,0,0,10,10H291a10,10,0,0,0,10-10V195a557.85,557.85,0,0,1-150,20A557.85,557.85,0,0,1,1,195Z" style="fill:#fff"/><path d="M291,1H11A10,10,0,0,0,1,11V176a539.94,539.94,0,0,0,150,21,539.94,539.94,0,0,0,150-21V11A10,10,0,0,0,291,1Z" style="fill:#fff"/></g></svg>
          </div>
          <div class="support-detail">
            <h2>Commercial Support</h2>
            <a href="https://www.lightbend.com/services/expert-support">Lightbend Subscription</a>
            <a href="https://www.lightbend.com/services/training">Training</a>
            <a href="https://www.lightbend.com/services/consulting">Consulting</a>
          </div>
        </div>
      </div>
      <div class="col-md-4 text-right ts">
        &copy; 2016-<script>document.write(new Date().getFullYear())</script> Lightbend Inc.
        <a href="https://www.lightbend.com">
          <img src="files/lightbend-reverse.svg" alt="Lightbend, Inc.">
        </a>
      </div>
    </div>
  </div>
</footer><script src="/assets/versions.js"></script><script src="/assets/set-versions.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript"> docsearch({
  apiKey: 'e47ee877a07ea1c48722f08430d54913',
  indexName: 'scala-sbt',
  inputSelector: '#doc-search-bar',
  debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
        </div>
        
        <div class="highlight-outer">
              <div class="highlight-menu">
                <ul>
                  <li><button id="highlight-button-twitter"><img src="img/twitter-bird-dark-bgs.png"/></button></li>
                </ul>
              </div>
            </div>
      </body>
    </html>