<!DOCTYPE html SYSTEM "about:legacy-compat">
<html manifest="pamflet.manifest">
      <head>
        <meta charset="utf-8"/>
        <meta content="width=device-width, initial-scale=1" name="viewport"/>
        <title>sbt Reference Manual — sbt 1.3.x releases</title>
        <link rel="shortcut icon" href="favicon.ico"/>
        <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css"/>
        <link rel="stylesheet" href="css/pamflet.css" type="text/css" media="screen, projection"/>
        <link rel="stylesheet" href="css/pamflet-print.css" type="text/css" media="print"/>
        <link rel="stylesheet" href="css/pamflet-grid.css" type="text/css" media="screen and (min-device-width: 800px), projection"/>
        <link rel="stylesheet" href="css/color_scheme-redmond.css" type="text/css" media="screen, projection"/>
        <link rel="stylesheet" href="css/color_scheme-github.css" type="text/css" media="screen, projection"/>
        <link rel="stylesheet" href="css/color_scheme-monokai.css" type="text/css" media="screen, projection"/>
        <link rel="stylesheet" href="css/pamfletheight_80px_2em.css" type="text/css" media="screen and (min-device-width: 800px), projection"/>
        <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
        <script type="text/javascript" src="js/bootstrap.bundle.min.js"></script>
        <script type="text/javascript" src="js/pamflet.js"></script>
        <script type="text/javascript">
          Pamflet.page.language = 'en';
        </script>
        <script type="text/javascript" src="js/prettify/prettify.js"></script><script type="text/javascript" src="js/prettify/lang-scala.js"></script><link type="text/css" rel="stylesheet" href="css/prettify.css"/><script type="text/javascript"><!--
        window.onload=function() { prettyPrint(); };
      --></script>
        <link rel="stylesheet" href="css/custom-202107.css" type="text/css" media="screen, projection"/>
        
        <script type="text/javascript">
              Pamflet.twitter = '#sbt #scala';
            </script>
      </head>
      <body class="color_scheme-github">
        <div class="container-fluid contentswrapper h-100">
          <div class="row minh-100">
          <div class="col-md-4 col-xl-3 toccolumn leftcolumn">
                  <div class="lefttocwrapper">
      <div class="tocwrapper">
        
        <div class="tocbody show" id="toc">
        
        <div><a href="index.html">sbt Reference Manual</a></div><ol class="toc"> <li><div><a href="Getting-Started.html">Getting Started with sbt</a></div><ol class="toc"> <li><div><a href="Setup.html">Installing sbt</a></div><ol class="toc"> <li><div><a href="Installing-sbt-on-Mac.html">Installing sbt on macOS</a></div></li><li><div><a href="Installing-sbt-on-Windows.html">Installing sbt on Windows</a></div></li><li><div><a href="Installing-sbt-on-Linux.html">Installing sbt on Linux</a></div></li> </ol></li><li><div><a href="sbt-by-example.html">sbt by example</a></div></li><li><div><a href="Directories.html">Directory structure</a></div></li><li><div><a href="Running.html">Running</a></div></li><li><div><a href="IDE.html">IDE Integration</a></div></li><li><div><a href="Basic-Def.html">Build definition</a></div></li><li><div><a href="Multi-Project.html">Multi-project builds</a></div></li><li><div><a href="Task-Graph.html">Task graph</a></div></li><li><div><a href="Scopes.html">Scopes</a></div></li><li><div><a href="Appending-Values.html">Appending values</a></div></li><li><div><a href="Scope-Delegation.html">Scope delegation (.value lookup)</a></div></li><li><div><a href="Library-Dependencies.html">Library dependencies</a></div></li><li><div><a href="Using-Plugins.html">Using plugins</a></div></li><li><div><a href="Custom-Settings.html">Custom settings and tasks</a></div></li><li><div><a href="Organizing-Build.html">Organizing the build</a></div></li><li><div><a href="Summary.html">Getting Started summary</a></div></li> </ol></li><li><div><a href="Faq.html">Frequently Asked Questions</a></div><ol class="toc">  </ol></li><li><div><a href="General-Info.html">General Information</a></div><ol class="toc"> <li><div><a href="Credits.html">Credits</a></div></li><li><div><a href="Community-Plugins.html">Community Plugins</a></div></li><li><div><a href="Repository-Roles.html">Community Repository Policy</a></div></li><li><div><a href="Bintray-For-Plugins.html">Bintray For Plugins</a></div></li><li><div><a href="Using-Sonatype.html">Using Sonatype</a></div></li><li><div><a href="Contributing-to-sbt.html">Contributing to sbt</a></div></li><li><div><a href="Changes.html">Changes</a></div><ol class="toc"> <li><div><a href="Migrating-from-sbt-013x.html">Migrating from sbt 0.13.x</a></div></li><li><div><a href="sbt-1.4-Release-Notes.html">sbt 1.4.x releases</a></div></li><li><div class="current">sbt 1.3.x releases</div></li><li><div><a href="sbt-1.2-Release-Notes.html">sbt 1.2.x releases</a></div></li><li><div><a href="sbt-1.1-Release-Notes.html">sbt 1.1.x releases</a></div></li><li><div><a href="sbt-1.0-Release-Notes.html">sbt 1.0.x releases</a></div></li> </ol></li> </ol></li><li><div><a href="Detailed-Topics.html">Detailed Topics</a></div><ol class="toc"> <li><div><a href="Using-sbt.html">Using sbt</a></div><ol class="toc"> <li><div><a href="Command-Line-Reference.html">Command Line Reference</a></div></li><li><div><a href="Console-Project.html">Console Project</a></div></li><li><div><a href="Cross-Build.html">Cross-building</a></div></li><li><div><a href="Inspecting-Settings.html">Interacting with the Configuration System</a></div></li><li><div><a href="Triggered-Execution.html">Triggered Execution</a></div></li><li><div><a href="Scripts.html">Script mode</a></div></li><li><div><a href="sbt-server.html">sbt Server</a></div></li><li><div><a href="Understanding-Recompilation.html">Understanding Incremental Recompilation</a></div></li> </ol></li><li><div><a href="Configuration-Index.html">Configuration</a></div><ol class="toc"> <li><div><a href="Classpaths.html">Classpaths, sources, and resources</a></div></li><li><div><a href="Compiler-Plugins.html">Compiler Plugin Support</a></div></li><li><div><a href="Configuring-Scala.html">Configuring Scala</a></div></li><li><div><a href="Forking.html">Forking</a></div></li><li><div><a href="Global-Settings.html">Global Settings</a></div></li><li><div><a href="Java-Sources.html">Java Sources</a></div></li><li><div><a href="Mapping-Files.html">Mapping Files</a></div></li><li><div><a href="Local-Scala.html">Local Scala</a></div></li><li><div><a href="Macro-Projects.html">Macro Projects</a></div></li><li><div><a href="Paths.html">Paths</a></div></li><li><div><a href="Parallel-Execution.html">Parallel Execution</a></div></li><li><div><a href="Process.html">External Processes</a></div></li><li><div><a href="Running-Project-Code.html">Running Project Code</a></div></li><li><div><a href="Testing.html">Testing</a></div></li><li><div><a href="In-Process-Classloaders.html">In process class loading</a></div></li><li><div><a href="Globs.html">Globs</a></div></li><li><div><a href="Remote-Caching.html">Remote Caching</a></div></li> </ol></li><li><div><a href="Dependency-Management-Index.html">Dependency Management</a></div><ol class="toc"> <li><div><a href="Artifacts.html">Artifacts</a></div></li><li><div><a href="Dependency-Management-Flow.html">Dependency Management Flow</a></div></li><li><div><a href="Library-Management.html">Library Management</a></div></li><li><div><a href="Proxy-Repositories.html">Proxy Repositories</a></div></li><li><div><a href="Publishing.html">Publishing</a></div></li><li><div><a href="Resolvers.html">Resolvers</a></div></li><li><div><a href="Update-Report.html">Update Report</a></div></li><li><div><a href="Cached-Resolution.html">Cached Resolution</a></div></li> </ol></li><li><div><a href="Tasks-and-Commands.html">Tasks and Commands</a></div><ol class="toc"> <li><div><a href="Tasks.html">Tasks</a></div></li><li><div><a href="Caching.html">Caching</a></div></li><li><div><a href="Input-Tasks.html">Input Tasks</a></div></li><li><div><a href="Commands.html">Commands</a></div></li><li><div><a href="Parsing-Input.html">Parsing and tab completion</a></div></li><li><div><a href="Build-State.html">State and actions</a></div></li><li><div><a href="Task-Inputs.html">Tasks/Settings: Motivation</a></div></li> </ol></li><li><div><a href="Plugins-and-Best-Practices.html">Plugins and Best Practices</a></div><ol class="toc"> <li><div><a href="Best-Practices.html">General Best Practices</a></div></li><li><div><a href="Plugins.html">Plugins</a></div></li><li><div><a href="Plugins-Best-Practices.html">Plugins Best Practices</a></div></li><li><div><a href="GitHub-Actions-with-sbt.html">Setting up GitHub Actions with sbt</a></div></li><li><div><a href="Travis-CI-with-sbt.html">Setting up Travis CI with sbt</a></div></li><li><div><a href="Testing-sbt-plugins.html">Testing sbt plugins</a></div></li><li><div><a href="sbt-new-and-Templates.html">sbt new and Templates</a></div></li><li><div><a href="Cross-Build-Plugins.html">Cross building plugins</a></div></li> </ol></li> </ol></li><li><div><a href="Howto.html">How to…</a></div><ol class="toc"> <li><div><a href="Howto-Classpaths.html">Classpaths</a></div></li><li><div><a href="Howto-Customizing-Paths.html">Customizing paths</a></div></li><li><div><a href="Howto-Generating-Files.html">Generating files</a></div></li><li><div><a href="Howto-Inspect-the-Build.html">Inspect the build</a></div></li><li><div><a href="Howto-Interactive-Mode.html">Interactive mode</a></div></li><li><div><a href="Howto-Logging.html">Configure and use logging</a></div></li><li><div><a href="Howto-Project-Metadata.html">Project metadata</a></div></li><li><div><a href="Howto-Package.html">Configure packaging</a></div></li><li><div><a href="Howto-Running-Commands.html">Running commands</a></div></li><li><div><a href="Howto-Scala.html">Configure and use Scala</a></div></li><li><div><a href="Howto-Scaladoc.html">Generate API documentation</a></div></li><li><div><a href="Define+Custom+Tasks.html">Define Custom Tasks</a></div></li><li><div><a href="Howto-Startup.html">How to take an action on startup</a></div></li><li><div><a href="Howto-Track-File-Inputs-and-Outputs.html">Track file inputs and outputs</a></div></li><li><div><a href="Troubleshoot-Memory-Issues.html">Troubleshoot memory issues</a></div></li><li><div><a href="Howto-Sequencing.html">Sequencing</a></div><ol class="toc"> <li><div><a href="Howto-Sequential-Task.html">Defining a sequential task with Def.sequential</a></div></li><li><div><a href="Howto-Dynamic-Task.html">Defining a dynamic task with Def.taskDyn</a></div></li><li><div><a href="Howto-After-Input-Task.html">Doing something after an input task</a></div></li><li><div><a href="Howto-Dynamic-Input-Task.html">Defining a dynamic input task with Def.inputTaskDyn</a></div></li><li><div><a href="Howto-Sequence-using-Commands.html">How to sequence using commands</a></div></li> </ol></li><li><div><a href="Custom-Dependency-Configuration.html">How to define a custom dependency configuration</a></div></li><li><div><a href="Examples.html">Examples</a></div><ol class="toc"> <li><div><a href="Basic-Def-Examples.html">.sbt build examples</a></div></li><li><div><a href="Scala-Files-Example.html">.sbt build with .scala files example</a></div></li><li><div><a href="Advanced-Configurations-Example.html">Advanced configurations example</a></div></li><li><div><a href="Advanced-Command-Example.html">Advanced command example</a></div></li> </ol></li> </ol></li><li><div><a href="Name-Index.html">Index</a></div></li><li><div><a href="Developers-Guide.html">Developer’s Guide (Work in progress)</a></div><ol class="toc"> <li><div><a href="Modularization.html">Modularization</a></div><ol class="toc"> <li><div><a href="Module-Summary.html">Module summary</a></div></li> </ol></li><li><div><a href="Coding-Guideline.html">sbt Coding Guideline</a></div><ol class="toc">  </ol></li><li><div><a href="Datatype.html">sbt-datatype</a></div><ol class="toc">  </ol></li><li><div><a href="Compiler-Interface.html">Compiler Interface</a></div><ol class="toc"> <li><div><a href="Version-Specific-Sources.html">Fetching the most specific sources</a></div></li> </ol></li><li><div><a href="Sbt-Launcher.html">sbt Launcher</a></div><ol class="toc"> <li><div><a href="Launcher-Getting-Started.html">Getting Started with the sbt launcher</a></div></li><li><div><a href="Launcher-Architecture.html">Sbt Launcher Architecture</a></div></li><li><div><a href="Launcher-Configuration.html">sbt Launcher Configuration</a></div></li> </ol></li><li><div><a href="DevGuide-Notes.html">Notes</a></div><ol class="toc"> <li><div><a href="Core-Principles.html">Core Principles</a></div></li><li><div><a href="Settings-Core.html">Settings Core</a></div></li><li><div><a href="Setting-Initialization.html">Setting Initialization</a></div></li><li><div><a href="Command-Line-Applications.html">Creating Command Line Applications Using sbt</a></div></li> </ol></li> </ol></li><li><div><a href="Archived+pages.html">Archived pages</a></div><ol class="toc"> <li><div><a href="Hello.html">Hello, World</a></div></li> </ol></li><li class="generated"><div><a href="Contents+in+Depth.html">Contents in Depth</a></div></li><li class="generated"><div><a href="Combined+Pages.html">Combined Pages</a></div></li> </ol></div>
      </div>
      </div>
                </div><div class="col-md-8 col-xs-9">
                  <div class="rightcolumn contents">
                  <h2 id="sbt+1.3.x+releases">sbt 1.3.x releases<a href="#sbt+1.3.x+releases" class="header-link"><span class="header-link-content">&nbsp;</span></a></h2><h3 id="sbt+1.3.0">sbt 1.3.0<a href="#sbt+1.3.0" class="header-link"><span class="header-link-content">&nbsp;</span></a></h3><p>This is the third feature release of sbt 1.x, a binary compatible release focusing on new features. sbt 1.x is released under <strong>Semantic Versioning</strong>, and the plugins are expected to work throughout the 1.x series.
</p><p>The headline features of sbt 1.3 are out-of-box <a href="https://get-coursier.io/">Coursier</a> library management, ClassLoader layering, IO improvements, and super shell. Combined together we hope these features will improve the user experience of running your builds.
</p><h4 id="Changes+with+compatibility+implication">Changes with compatibility implication<a href="#Changes+with+compatibility+implication" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><ul><li>Library management with Coursier. See below for details.
</li><li>Super shell. See below for details.
</li><li>Multi command no longer requires leading semicolon. clean;Test/compile; would work. #4456 by @eatkins
</li><li>Deprecates HTTP resolvers, but allow localhost or resolvers marked <code>.withAllowInsecureProtocol(true)</code> #4997
</li><li>Deprecates <code>CrossVersion.Disabled</code>. Please use <code>CrossVersion.disabled</code> instead sbt/librarymanagement#316
</li><li>ClassLoader management: To prevent resource leaks, sbt 1.3.0 closes the ephemeral ClassLoaders used by the <code>run</code> and <code>test</code> tasks after those tasks complete. This may cause downstream crashes if the task uses ShutdownHooks or if any threads created by the tasks continue running after the task completes. To disable this behavior, either set <code>Compile / run / fork := true</code> or run sbt with <code>-Dsbt.classloader.close=false</code>.
</li></ul><h4 id="Library+management+with+Coursier">Library management with Coursier<a href="#Library+management+with+Coursier" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>sbt 1.3.0 adopts <a href="https://get-coursier.io/">Coursier</a> for the library management. Coursier is a dependency resolver like Ivy, rewritten in Scala by Alexandre Archambault (<a href="https://github.com/alexarchambault">@alexarchambault</a>), aiming to be a faster alternative.
</p><p><strong>Note</strong>: Under some situations, Coursier may not resolve the same way as Ivy (for example remote <code>-SNAPSHOT</code>s are cached for 24 hours). If you wish to go back to Apache Ivy for library management, put the following in your <code>build.sbt</code>:
</p><pre><code class="prettyprint lang-scala">ThisBuild / useCoursier := false
</code></pre><p>Many people were involved in the effort of bringing Coursier to sbt. Early in 2018 Leonard Ehrenfried (<a href="https://github.com/leonardehrenfried">@leonardehrenfried</a>) started the Coursier-backed LM API implementation as <a href="https://github.com/sbt/librarymanagement/pull/190">lm#190</a>. During the fall, it was further improved by Andrea Peruffo (<a href="https://github.com/andreaTP">@andreaTP</a>), and <code>lm-coursier</code> eventually became part of coursier/sbt-coursier repository maintained by Alex. This spring, Eugene (<a href="https://github.com/eed3si9n">@eed3si9n</a>) revisited this again to make a few more changes so we can swap out the LM engine in <a href="https://github.com/sbt/sbt/pull/4614">#4614</a> with the help from Alex.
</p><h4 id="Turbo+mode+with+ClassLoader+layering">Turbo mode with ClassLoader layering<a href="#Turbo+mode+with+ClassLoader+layering" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>sbt 1.3.0 adds “turbo” mode that enables experimental or advanced features that might require some debugging by the build user when it doesn’t work.
</p><pre><code class="prettyprint lang-scala">ThisBuild / turbo := true
</code></pre><p>Initially we are putting the layered ClassLoader (<code>ClassLoaderLayeringStrategy.AllLibraryJars</code>) behind this flag.
</p><p>sbt has always created two-layer ClassLoaders when evaluating the <code>run</code> and <code>test</code> tasks. The top layer of the ClassLoader contains the scala library jars so that the classes in the scala package may be reused across multiple task evaluations. The second layer loads the rest of the project classpath including the library dependencies and project class files. sbt 1.3.0 introduces <strong>experimental</strong> <code>classLoaderLayeringStrategy</code> feature that furthers this concept.
</p><pre><code class="prettyprint lang-scala">Compile / classLoaderLayeringStrategy := ClassLoaderLayeringStrategy.Flat
// default
Compile / classLoaderLayeringStrategy := ClassLoaderLayeringStrategy.ScalaLibrary
// enabled with turbo
Compile / classLoaderLayeringStrategy := ClassLoaderLayeringStrategy.AllLibraryJars

Test / classLoaderLayeringStrategy := ClassLoaderLayeringStrategy.Flat
// default
Test / classLoaderLayeringStrategy := ClassLoaderLayeringStrategy.ScalaLibrary
// enabled with turbo
Test / classLoaderLayeringStrategy := ClassLoaderLayeringStrategy.AllLibraryJars
</code></pre><ul><li><code>ClassLoaderLayeringStrategy.Flat</code> includes all classes and JARs except for the Java runtime. The behavior of tasks using this strategy should be similar to forking without the overhead of starting a new jvm.
</li><li><code>ClassLoaderLayeringStrategy.ScalaLibrary</code> creates a two-layer ClassLoader where Scala standard library is kept warm, similar to sbt 1.2.x
</li><li><code>ClassLoaderLayeringStrategy.AllLibraryJars</code> creates a three-layer ClassLoader where library dependencies, in addition to Scala standard libraries are kept warm
</li></ul><p><code>ClassLoaderLayeringStrategy.AllLibraryJars</code> should benefit the response time of run and test tasks. By caching the library jar classloader, the startup latency of the run and test tasks can be reduced significantly when they are run multiple times within the same session. GC pressure is also reduced because libraries jars will not be reloaded every time the task is evaluated.
</p><p><strong>Note</strong>: ClassLoaderLayeringStrategy.AllLibraryJars reuses the singleton object between the tests, which requires libraries to clean after itself.
</p><p><code>ClassLoaderLayeringStrategy.Flat</code> on the other hand will benefit certain applications that do not work well with layered ClassLoaders. One such example is Java serialization + serialization proxy pattern used by Scala collections.
</p><p>ClassLoader layering was contributed by Ethan Atkins (@eatkins) as #4476
</p><h4 id="IO+improvements">IO improvements<a href="#IO+improvements" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>In addition to classloader layering, sbt 1.3.0 incorporates numerous performance enhancements including:
</p><ul><li>faster recursive directory listing — sbt internally uses a native library,
<a href="https://github.com/swoval/swoval/blob/master/files/README.md">swoval</a>, that
provides a jni interface to native os apis that allow for faster recursive
directory listing than the implementations in the java standard library.
</li><li>reduced latency of file change detection in continuous builds. In most cases
file events will trigger task evaluation within 10ms.
</li></ul><p>As of this writing sbt 1.3.0’s edit-compile-test loop for 5000 source files is faster than that edit-compile-test with three source files using sbt 0.13, Gradle, and other build tools we tested (see <a href="https://github.com/eatkins/scala-build-watch-performance">build
performance</a> for
details). These changes were contributed by Ethan Atkins (@eatkins).
</p><h4 id="Glob">Glob<a href="#Glob" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>sbt 1.3.0 introduces a new type, <code>Glob,</code> that describes a path search query. For example, all of the scala sources in the project directory can be described by <code>Glob(baseDirectory.value, RecursiveGlob / &quot;*.scala&quot;)</code> or <code>baseDirectory.value.toGlob / ** / &quot;*.scala&quot;,</code> where <code>**</code> is an alias for <code>RecursiveGlob</code>. Glob expands on <a href="https://www.scala-sbt.org/1.x/docs/Paths.html#Path+Finders">PathFinders</a> but they can be composed with no io overhead. Globs can be retrieved using a <code>FileTreeView</code>. For example, one can write:
</p><pre><code class="prettyprint lang-scala">val scalaSources = baseDirectory.value.toGlob / ** / &quot;*.scala&quot;
val javaSources = baseDirectory.value.toGlob / ** / &quot;*.java&quot;
val allSources = fileTreeView.value.list(Seq(scalaSources, javaSources))
</code></pre><p>and the <code>FileTreeView</code> will only traverse the base directory once. Globs and FileTreeView were added by Ethan Atkins (<a href="https://github.com/eatkins">@eatkins</a>) in <a href="https://github.com/sbt/io/pull/178">io#178</a>,<a href="https://github.com/sbt/io/pull/216">io#216</a>,<a href="https://github.com/sbt/io/pull/226">io#226</a>
</p><h4 id="Watch+improvements">Watch improvements<a href="#Watch+improvements" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>sbt 1.3.0 introduces a new file monitoring implementation. It uses enhanced apis for tracking file change events using os events. It adds a new parser that extracts the specific task(s) for which it will monitor source files and rerun when it detects changes. Only source dependencies of the running tasks are monitored. For example, when running <code>~compile</code>, changes to test source files will not trigger a new build. Between file events, there are also now options to return to the shell, rerun the previous command(s) or exit sbt. These changes were implemented by Ethan Atkins (<a href="https://github.com/eatkins">@eatkins</a>) in <a href="https://github.com/sbt/io/pull/178">io#178</a>,<a href="https://github.com/sbt/io/pull/216">#216</a>,<a href="https://github.com/sbt/io/pull/226">#226</a>,<a href="https://github.com/sbt/sbt/pull/4512">#4512</a>,<a href="https://github.com/sbt/sbt/pull/4627">#4627</a>.
</p><h4 id="Build+definition+source+watch">Build definition source watch<a href="#Build+definition+source+watch" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>sbt 1.3.0 automatically watches the build definition sources and displays a warning
if you execute a task without reloading. This can be configured to reload automatically as follows:
</p><pre><code class="prettyprint lang-scala">Global / onChangedBuildSource := ReloadOnSourceChanges
</code></pre><p>This feature was contributed by Ethan Atkins (<a href="https://github.com/eatkins">@eatkins</a>) in <a href="https://github.com/sbt/sbt/pull/4664">#4664</a>
</p><h4 id="Custom+incremental+tasks">Custom incremental tasks<a href="#Custom+incremental+tasks" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>sbt 1.3.0 provides support to implement custom incremental tasks based on files.
Given a custom task that returns <code>java.nio.file.Path</code>, <code>Seq[java.nio.file.Path]</code>, <code>File</code>, or <code>Seq[File]</code>,
you can define a few helper tasks to make it more incremental.
</p><pre><code class="prettyprint lang-scala">import java.nio.file._
import scala.sys.process._
val gccCompile = taskKey[Seq[Path]](&quot;compile C code using gcc&quot;)
val gccHeaders = taskKey[Seq[Path]](&quot;header files&quot;)
val gccInclude = settingKey[Path](&quot;include directory&quot;)
val gccLink = taskKey[Path](&quot;link C code using gcc&quot;)

gccCompile / sourceDirectory := sourceDirectory.value
gccCompile / fileInputs += (gccCompile / sourceDirectory).value.toGlob / ** / &quot;*.c&quot;
gccInclude := (gccCompile / sourceDirectory).value.toPath / &quot;include&quot;
gccHeaders / fileInputs += gccInclude.value.toGlob / &quot;*.h&quot;
gccCompile / target := baseDirectory.value / &quot;out&quot;

gccCompile := {
  val objectDir = Files.createDirectories((gccCompile / target).value.toPath / &quot;objects&quot;)
  def objectFile(path: Path): Path =
    target.value.toPath / path.getFileName.toString.replaceAll(&quot;.c$&quot;, &quot;.o&quot;)
  Files.createDirectories(target.value.toPath)
  val headerChanges = gccHeaders.inputFileChanges.hasChanges
  val changes = gccCompile.inputFileChanges
  changes.deleted.foreach(sf =&gt; Files.deleteIfExists(objectFile(sf)))
  val sourceFileChanges = changes.created ++ changes.modified
  val needRecompile = (sourceFileChanges ++ (if (headerChanges) changes.unmodified else Nil)).toSet

  val logger = streams.value.log
  gccCompile.inputFiles.map { sf =&gt;
    val of = objectFile(sf)
    if (!Files.exists(of) || needRecompile(sf)) {
      logger.info(s&quot;Compiling $sf&quot;)
      s&quot;gcc -I${gccInclude.value} -c $sf -o $of&quot;.!!
    }
    of
  }
}
</code></pre><p>Given this setup, <code>gccCompile.inputFiles</code> will return a sequence of all of the input <code>c</code> source files, <code>gccCompile.inputFileChanges</code> returns a data structure containing the created, deleted, modified and unmodified files since the last run of <code>gccCompile</code> while <code>gccHeaders.changedInputFiles</code> returns the headers that have changed since the last run of <code>gccCompile</code>. Taken together, these tasks can be used to incrementally only rebuild the source files that need to be rebuilt given the file system changes since the last time gccCompile completed.
</p><p>In another task such as <code>gccLink</code>, the result of <code>gccCompile</code> can be tracked as well using <code>gccCompile.outputFileChanges</code>.
</p><pre><code class="prettyprint lang-scala">gccLink := {
  val library = (gccCompile / target).value.toPath / &quot;libmylib.dylib&quot;
  val objectFiles = gccCompile.outputFiles
  val logger = streams.value.log
  if (!Files.exists(library) || gccCompile.outputFileChanges.hasChanges) {
    logger.info(s&quot;Rebuilding $library&quot;)
    s&quot;gcc -dynamiclib -o $library ${objectFiles mkString &quot; &quot;}&quot;.!!
  }
  library
}
</code></pre><p>The inputs of a task will automatically be monitored by the ~ command which has a new parser that is context aware. A custom clean task is also implemented for any task that generates file outputs. The clean tasks are aggregated across the project and config scopes. For example, Test / clean will clean all of the files generated by tasks in the Test config declared in the Test config but not the files generated in the Compile config.
</p><p>This feature was contributed by Ethan Atkins (@eatkins) in #4627.
</p><h4 id="Super+shell">Super shell<a href="#Super+shell" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>When running in an ANSI-compatible terminal, sbt 1.3.0 will display the currently running tasks. This gives the developer the idea of what tasks are being processed in parallel, and where the build is spending its time. In homage to Gradle’s “Rich Console” and Buck’s “Super Console”, we call ours “Super shell.”
</p><p>To opt-out put the following in the build:
</p><pre><code class="prettyprint lang-scala">ThisBuild / useSuperShell := false
</code></pre><p>or run sbt with <code>--supershell=false</code> (or <code>-Dsbt.supershell=false</code>). This feature was added by Eugene Yokota (<a href="https://github.com/eed3si9n">@eed3si9n</a>) as <a href="https://github.com/sbt/sbt/pull/4396">#4396</a>/<a href="https://github.com/sbt/util/pull/196">util#196</a>.
</p><h4 id="Tracing">Tracing<a href="#Tracing" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>To view the task breakdown visually, run sbt with <code>--traces</code> (or <code>-Dsbt.traces=true</code>). This will generate <code>build.traces</code> file, which is viewable using Chrome Tracing <code>chrome://tracing/</code>. This feature was contributed by Jason Zaugg (<a href="https://github.com/retronym">@retronym</a>).
</p><p>To output the task timings on screen, run sbt with <code>--timings</code> (or <code>-Dsbt.task.timings=true -Dsbt.task.timings.on.shutdown=true</code>).
</p><h4 id="SemanticDB+support">SemanticDB support<a href="#SemanticDB+support" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>sbt 1.3.0 makes it easier to generate <a href="https://scalameta.org/docs/semanticdb/guide.html">SemanticDB</a>. To enable the generation of SemanticDB build-wide:
</p><pre><code class="">ThisBuild / semanticdbEnabled := true
ThisBuild / semanticdbVersion := &quot;4.1.9&quot;
ThisBuild / semanticdbIncludeInJar := false
</code></pre><p>This was added by <a href="https://github.com/eed3si9n">@eed3si9n</a> as <a href="https://github.com/sbt/sbt/pull/4410">#4410</a>.
</p><h4 id="print+command">print command<a href="#print+command" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>sbt 1.3.0 adds a new <code>print</code> command, similar to <code>show</code> but prints directly to standard out.
</p><pre><code class=""># sbt -no-colors --error  &quot;print akka-cluster/scalaVersion&quot;
2.12.8
</code></pre><p>This was contributed by David Knapp (<a href="https://github.com/Falmarri">@Falmarri</a>) as <a href="https://github.com/sbt/sbt/pull/4341">#4341</a>
</p><h4 id="Appending+Function1">Appending Function1<a href="#Appending+Function1" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p><code>Function1</code> can be appended using <code>+=</code>.
</p><pre><code class="">Global / onLoad += { s =&gt;
  doSomething()
  s
}
</code></pre><p>This was contributed by Dale Wijnand (<a href="https://github.com/dwijnand">@dwijnand</a>) as <a href="https://github.com/sbt/sbt/pull/4521">#4521</a>.
</p><h4 id="JDK+11+support">JDK 11 support<a href="#JDK+11+support" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>sbt 1.3.0 is first release of sbt that’s been testing on JDK11 extensively.
All integration tests on Travis CI are on AdoptOpenJDK’s JDK 11, which were updated by <a href="https://github.com/eed3si9n">@eed3si9n</a> as <a href="https://github.com/sbt/sbt/pull/4389">#4389</a>/<a href="https://github.com/sbt/zinc/pull/639">zinc#639</a>/[zinc640].
</p><ul><li>Fixes warnings on JDK 9+ by upgrading to protobuf 3.7.0 <a href="https://github.com/sbt/zinc/pull/644">zinc#644</a> by <a href="https://github.com/smarter">@smarter</a>
</li><li>Fixes spurious rebuilds caused by invalidation of <code>rt.jar</code> on JDK 11 <a href="https://github.com/sbt/sbt/pull/4679">#4679</a> by <a href="https://github.com/eatkins">@eatkins</a>
</li></ul><h4 id="Other+bug+fixes+and+improvements">Other bug fixes and improvements<a href="#Other+bug+fixes+and+improvements" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><ul><li>Fixes cross building with a single-letter alias <a href="https://github.com/sbt/sbt/pull/4355">#4355</a> / <a href="https://github.com/sbt/sbt/issues/1074">#1074</a> by <a href="https://github.com/eed3si9n">@eed3si9n</a>
</li><li>Removes old warning about global directory <a href="https://github.com/sbt/sbt/pull/4356">#4356</a> / <a href="https://github.com/sbt/sbt/issues/1054">#1054</a> by <a href="https://github.com/eed3si9n">@eed3si9n</a>
</li><li>Improves JDK discovery for cross-JDK forking <a href="https://github.com/sbt/sbt/pull/4313">#4313</a> / <a href="https://github.com/sbt/sbt/pull/4462">#4462</a> by <a href="https://github.com/raboof">@raboof</a>
</li><li>Expands <code>~</code> in <code>-Dsbt.global.base</code> property to user home. <a href="https://github.com/sbt/sbt/pull/4367">#4367</a> by <a href="https://github.com/kai-chi">@kai-chi</a>
</li><li>Adds <code>def sequential[A](tasks: Seq[Initialize[Task[A]]]): Initialize[Task[A]]</code>. <a href="https://github.com/sbt/sbt/pull/4369">#4369</a> by <a href="https://github.com/3tty0n">@3tty0n</a>
</li><li>Fixes sbt server to send error event on command failure. <a href="https://github.com/sbt/sbt/pull/4378">#4378</a> by <a href="https://github.com/andreaTP">@andreaTP</a>
</li><li>Implements cancellation of request by LSP client. <a href="https://github.com/sbt/sbt/pull/4384">#4384</a> by <a href="https://github.com/andreaTP">@andreaTP</a>
</li><li>Implements <code>&quot;sbt/completion&quot;</code> command in sbt to server to complete sbt commands. <a href="https://github.com/sbt/sbt/pull/4397">#4397</a> by <a href="https://github.com/andreaTP">@andreaTP</a>
</li><li>Fixes errors order reported by sbt server. <a href="https://github.com/sbt/sbt/pull/4497">#4497</a> by <a href="https://github.com/tdroxler">@tdroxler</a>
</li><li>Fixes cached resolution. <a href="https://github.com/sbt/sbt/pull/4424">#4424</a> by <a href="https://github.com/eed3si9n">@eed3si9n</a>
</li><li>The sbt task definition linter warns rather than errors by default.
The linter can be disabled entirely by putting <code>import sbt.dsl.LinterLevel.Ignore</code> in scope. <a href="https://github.com/sbt/sbt/pull/4485">#4485</a> by <a href="https://github.com/eatkins">@eatkins</a>
</li><li>Full GC is only automatically triggered when sbt has been idle for at least a
minute and is only run at most once between shell commands. This improves shell
responsiveness. <a href="https://github.com/sbt/sbt/pull/4544">#4544</a> by <a href="https://github.com/eatkins">@eatkins</a>
</li><li>Avoids NPE in JDK12. <a href="https://github.com/sbt/sbt/pull/4549">#4549</a> by <a href="https://github.com/retronym">@retronym</a>
</li><li>Fixes the eviction warning summary <a href="https://github.com/sbt/librarymanagement/pull/288">lm#288</a> by <a href="https://github.com/bigwheel">@bigwheel</a>
</li><li>Fixes Zinc’s flag to skip the persistence of API info. <a href="https://github.com/sbt/zinc/pull/399">zinc#399</a> by <a href="https://github.com/romanowski">@romanowski</a>
</li><li>Fixes Zinc not detecting synthetic top level member changes. <a href="https://github.com/sbt/sbt/issues/4316">#4316</a>/<a href="https://github.com/sbt/zinc/pull/572">zinc#572</a> by <a href="https://github.com/jvican">@jvican</a>
</li><li>Zinc to notify callback of generated non-local classes before the compiler’s middle and backend phases. <a href="https://github.com/sbt/zinc/pull/582">zinc#582</a> by <a href="https://github.com/jvican">@jvican</a>
</li><li>Removes a use of regex in Zinc for performance. <a href="https://github.com/sbt/zinc/pull/583">zinc#583</a> by <a href="https://github.com/retronym">@retronym</a>
</li><li>Fixes incremental compilation involving default arguments. <a href="https://github.com/sbt/zinc/pull/591">zinc#591</a> by <a href="https://github.com/jvican">@jvican</a>
</li><li>Adds Analysis callback of Zinc thread-safe. <a href="https://github.com/sbt/zinc/pull/626">zinc#626</a> by <a href="https://github.com/dotta">@dotta</a>
</li><li>Fixes a non-zero exit Javadoc not failing the task. <a href="https://github.com/sbt/zinc/pull/625">zinc#625</a> by <a href="https://github.com/raboof">@raboof</a>
</li></ul><h4 id="Participation">Participation<a href="#Participation" class="header-link"><span class="header-link-content">&nbsp;</span></a></h4><p>First, I’d like to introduce Ethan Atkins, a core community member of sbt project, and author of Close Watch that uses native code to provide watch service on macOS. Normally I don’t publicize the number of commits, but here’s the top 10 for sbt 1.3.0:
</p><pre><code class="">541 Ethan Atkins
369 Eugene Yokota (eed3si9n)
42  Jorge Vicente Cantero (jvican)
35  Łukasz Wawrzyk
34  Dale Wijnand
24  Andrea Peruffo
16​​  Kenji Yoshida (xuwei-k)
13  Guillaume Martres
7   Arnout Engelen
7   Jason Zaugg
</code></pre><p>As a community member, Ethan has contributed various IO related improvements to make sbt more responsive in his own time. sbt 1.3.0 reflects many of his ideas.
</p><p>The last feature release of sbt 1 was <a href="https://www.lightbend.com/blog/scala-sbt-120-patchnotes">sbt 1.2.0</a> in July, 2018. Since then, we’ve released eight patch releases under sbt 1.2.x for bug fixes, but most of the feature enhancements were merged to <code>develop</code> branch. Over the course of these months, 45 contributors contributors participated in sbt 1.3.0 and Zinc: Ethan Atkins, Eugene Yokota (eed3si9n), Jorge Vicente Cantero (jvican), Łukasz Wawrzyk, Dale Wijnand, Andrea Peruffo, Kenji Yoshida (xuwei-k), Guillaume Martres, Arnout Engelen, Jason Zaugg, Krzysztof Romanowski, Antonio Cunei, Mirco Dotta, OlegYch, Alex Dupre, Nepomuk Seiler, 0lejk4, Alexandre Archambault, Eric Peters, Kazuhiro Sera, Philippus, Som Snytt, Syed Akber Jafri, Thomas Droxler, Veera Venky, bigwheel, Akhtyam Sakaev, Alexey Vakhrenev, Eugene Platonov, Helena Edelson, Ignasi Marimon-Clos, Julien Sirocchi, Justin Kaeser, Kajetan Maliszewski, Leonard Ehrenfried, Mikołaj Jakubowski, Nafer Sanabria, Stefan Wachter, Yasuhiro Tatsuno, Yusuke Izawa, falmarri, ilya, kai-chi, tanishiking, Ólafur Páll Geirsson. Thank you!
</p><div class="bottom nav">
                <div class="row">
                  <div class="col-md-auto">
                    <a href="sbt-1.2-Release-Notes.html">
                      <div class="arrowitem">
                        <span class="arrow">&gt;</span>
                      </div>

                      <div class="arrowitem">
                        <em>Next page</em><br/>
                        sbt 1.2.x releases
                      </div>

                    </a>
                  </div>
                </div>
                <div class="row w-100">
        <div class="col-md-auto ml-auto">
          <ul class="language-bar">
            
          </ul>
        </div>
      </div>
              </div>
                  </div>
                </div>
          </div> <!-- row -->
        </div>
        <div class="header">
          <link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700,900,400italic,700italic" rel="stylesheet" type="text/css">
<!-- Algolia stylesheet -->
<link href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" rel="stylesheet" type = "text/css">
<div class="container-fluid top nav">
  <div class="row w-100">
    <div class="col-md-4">
      <div class="logo">
        <a href="../../index.html"><img src="files/sbt-logo.svg" alt="sbt"></a>
        <span class="versions"><select id="versions"></select></span>
      </div>
    </div>
    <div class="col-md-8">
        <div class="docsearch">
          <input type="text" id="doc-search-bar" placeholder="Search...">
          <ul class="result-container" id="result-container" style="display: none;"></ul>
        </div>
        <div class="nav" id="topbar">
          <a href="../../learn.html">Learn</a>
          <a href="../../download.html">Download</a>
          <a href="../../community.html">Get Involved</a>
          <a id="source-code" href="https://github.com/sbt/sbt"><img src="files/github-logo-teal.svg" alt="Source code" class="social"></a>
          <a id="twitter" href="https://twitter.com/scala_sbt"><img src="files/twitter-logo-teal.svg" alt="sbt on Twitter" class="social"></a>
          <a id="edit-on-github" href="https://github.com/sbt/website/edit/develop/src/reference/01-General-Info/90-Changes/27-sbt-1.3-Release-Notes.md"><img src="files/octicon-pencil.svg" alt="Edit on GitHub"></a>
        </div>
    </div>
  </div>
</div>
<script type="text/javascript" async>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-41449189-1', 'scala-sbt.org');
ga('send', 'pageview');
</script>
<script type="text/javascript" async>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-23127719-1', 'lightbend.com', {'allowLinker': true, 'name': 'tsTracker'});
  ga('tsTracker.require', 'linker');
  ga('tsTracker.linker:autoLink', ['lightbend.com','playframework.com','scala-lang.org','scaladays.org','spray.io','akka.io','scala-sbt.org']);
  ga('tsTracker.send', 'pageview');
</script>
<script type="text/javascript">
$(function() {
var scrollDown = function() {
if (window.location.hash !== "") {
  setTimeout(function() { $(window).scrollTop($(window).scrollTop() - 120); }, 100);
}
}
scrollDown();
$(window).bind('hashchange', function() {
scrollDown();
});
});
</script>

        </div>
        <div class="footer">
          <footer>
  <div class="container-fluid footer">
    <div class="row">
      <div class="col-md-8">
        <div class="support-item">
          <div class="support-icon">
            <svg class="svg-icon svg-icon-chat" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 97.5 85.2" enable-background="new 0 0 97.5 85.2"><path stroke="#fff" stroke-width="4.282" stroke-linecap="round" stroke-miterlimit="10" d="M27 29.5h-16.3c-4.7 0-8.6 3.9-8.6 8.6v25.7c0 4.7 3.9 8.6 8.6 8.6h2.7c.8 0 1.5.7 1.5 1.5v7.8c0 1.3 1.6 2 2.5 1l9.5-9.5c.5-.5 1.2-.8 2-.8h20.2c4.7 0 8.6-3.9 8.6-8.6v-7.8" fill="none"/><path fill="#fff" d="M85 0h-40c-6.9 0-12.5 5.6-12.5 12.5v33.4c0 2.2 1.8 4.1 4.1 4.1h29.9c.7 0 1.3.3 1.8.7l10 10c1.6 1.6 4.3.5 4.3-1.8v-6.5c0-1.4 1.1-2.5 2.5-2.5 6.9 0 12.5-5.6 12.5-12.5v-25c-.1-6.8-5.8-12.4-12.6-12.4z"/></svg>
          </div>
          <div class="support-detail">
            <h2>Community Support</h2>
            <a href="https://stackoverflow.com/questions/tagged/sbt">StackOverflow</a>
          </div>
        </div>
        <div class="support-item">
          <div class="support-icon">
            <svg id="lightbend-icon-reverse" class="svg-icon svg-icon-lightbend-reverse" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 302 262"><title>lightbend-icon</title><g id="icon"><path d="M1,195v56a10,10,0,0,0,10,10H291a10,10,0,0,0,10-10V195a557.85,557.85,0,0,1-150,20A557.85,557.85,0,0,1,1,195Z" style="fill:#fff"/><path d="M291,1H11A10,10,0,0,0,1,11V176a539.94,539.94,0,0,0,150,21,539.94,539.94,0,0,0,150-21V11A10,10,0,0,0,291,1Z" style="fill:#fff"/></g></svg>
          </div>
          <div class="support-detail">
            <h2>Commercial Support</h2>
            <a href="https://www.lightbend.com/services/expert-support">Lightbend Subscription</a>
            <a href="https://www.lightbend.com/services/training">Training</a>
            <a href="https://www.lightbend.com/services/consulting">Consulting</a>
          </div>
        </div>
      </div>
      <div class="col-md-4 text-right ts">
        &copy; 2016-<script>document.write(new Date().getFullYear())</script> Lightbend Inc.
        <a href="https://www.lightbend.com">
          <img src="files/lightbend-reverse.svg" alt="Lightbend, Inc.">
        </a>
      </div>
    </div>
  </div>
</footer><script src="/assets/versions.js"></script><script src="/assets/set-versions.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript"> docsearch({
  apiKey: 'e47ee877a07ea1c48722f08430d54913',
  indexName: 'scala-sbt',
  inputSelector: '#doc-search-bar',
  debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
        </div>
        
        <div class="highlight-outer">
              <div class="highlight-menu">
                <ul>
                  <li><button id="highlight-button-twitter"><img src="img/twitter-bird-dark-bgs.png"/></button></li>
                </ul>
              </div>
            </div>
      </body>
    </html>